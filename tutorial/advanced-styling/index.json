{"route":"/docs/tutorial/advanced-styling/","title":"高度なスタイリング","description":"Typstチュートリアル","part":null,"outline":[{"id":"guidelines","name":"Guidelines","children":[]},{"id":"set-rules","name":"Set Rules","children":[]},{"id":"title-and-abstract","name":"Title And Abstract","children":[]},{"id":"columns-and-headings","name":"Columns And Headings","children":[]},{"id":"まとめ","name":"まとめ","children":[]}],"body":{"kind":"html","content":"<h1>高度なスタイリング</h1>\n<p>このチュートリアルの前の2つの章では、Typstで文書を書く方法とその書式を変更する方法を学びました。\nそれらの章を通して書いたレポートが優れた評価を得たため、指導教員はそれをもとに学会論文を書いてほしいと考えています！\nもちろん、論文は学会のスタイルガイドに従わなければなりません。\nどうすればそれを達成できるか見てみましょう。</p>\n<p>始める前に、チームを作成して、そのチームに教員を招待して追加しましょう。\nまず、エディターの左上にある戻るアイコンでアプリのダッシュボードに戻ります。\n次に、左のツールバーのプラスアイコンを選択し、チームを作成します。\n最後に、新しいチームをクリックし、チーム名の横にあるmanage teamをクリックして設定に進みます。\nこれで教員をメールで招待することができます。</p>\n<p><img src=\"/docs/assets/3-advanced-team-settings.png\" alt=\"The team settings\" /></p>\n<p>次に、プロジェクトをチームに移動します。\nプロジェクトを開き、左のツールバーの歯車アイコンを選んで設定に行き、Ownerのドロップダウンから新しいチームを選択します。\n変更を保存するのを忘れないでください！</p>\n<p>あなたの教員もプロジェクトを編集することができ、お互いにリアルタイムで変更を確認できます。\n公式の<a href=\"https://discord.gg/2uDybryKPe\">Discordサーバー</a>に参加して他のユーザーを見つけ、一緒にチームを組んでみることも可能です！</p>\n<h2 id=\"guidelines\">学会ガイドライン</h2>\n<p>レイアウトのガイドラインは学会ウェブサイトに掲載されております。\nここでは以下の条件であった場合を考えましょう。</p>\n<ul>\n<li>フォントは11ptのセリフ体</li>\n<li>タイトルは17ptで太字</li>\n<li>アブストラクトは1段組みで本文は2段組み</li>\n<li>アブストラクトは中央揃え</li>\n<li>本文は両端揃え</li>\n<li>第1レベルのセクションの見出しは13ptで中央に配置し、小さな大文字で表示</li>\n<li>第2レベルの見出しは斜体で、本文と同じ大きさ</li>\n<li>ページはUSレターサイズとし、下中央にページ番号を付け、各ページの右上に論文のタイトルを記載</li>\n</ul>\n<p>これらのうち、多くの項目については既に対応方法を知っていますが、いくつかについては新しい記法を学ぶ必要があります。</p>\n<h2 id=\"set-rules\">setルール</h2>\n<p>まず、文書のsetルールを書くことから始めましょう。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>\n  paper<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;us-letter&quot;</span><span class=\"typ-punct\">,</span>\n  header<span class=\"typ-punct\">:</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>right<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n    A Fluid Dynamic Model for\n    Glacier Flow\n  <span class=\"typ-punct\">]</span><span class=\"typ-punct\">,</span>\n  numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1&quot;</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">par</span><span class=\"typ-punct\">(</span>justify<span class=\"typ-punct\">:</span> <span class=\"typ-key\">true</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>\n  font<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Libertinus Serif&quot;</span><span class=\"typ-punct\">,</span>\n  size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">11pt</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">600</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/39e9b50304410f17939935dca5419e30.png\" alt=\"Preview\"></div></div>\n<p>ここで行われていることの大半は、すでに分かりでしょう。\nテキストサイズを<code><span class=\"typ-num\">11pt</span></code>に、フォントをLibertinus Serifに設定しています。\nまた、段落の両端揃えを有効にし、ページサイズをUSレターとしています。</p>\n<p>ここで、<code>header</code>は新しい引数で、各ページの上部の余白に置くコンテンツを設定できます。\nヘッダーには、学会のスタイルガイドで要求されているように、論文のタイトルを指定します。\n<code>align</code>関数を用いてそのテキストを右寄せにします。</p>\n<p>最後に <code>numbering</code> 引数について説明します。\nここでは、ページ番号の付け方を定義する<a href=\"/docs/reference/model/numbering/\">numbering pattern</a>を指定できます。\n例えば<code><span class=\"typ-str\">&quot;1&quot;</span></code>と設定すると、Typstは素のページ番号のみを表示します。\nまた<code><span class=\"typ-str\">&quot;(1/1)&quot;</span></code>と設定すると、カッコで囲まれた現在のページと総ページ数が表示されるでしょう。\nさらに、カスタム関数を用意して完全に好みの書式にすることも可能です。</p>\n<h2 id=\"title-and-abstract\">タイトルとアブストラクトの作成</h2>\n<p>それでは、タイトルとアブストラクトを追加しましょう。\nTypst comes with a <a href=\"/docs/reference/model/title/\"><code>title</code></a> function. Let's start by providing our title as an argument:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-func\">#</span><span class=\"typ-func\">title</span><span class=\"typ-punct\">[</span>\n  A Fluid Dynamic Model\n  for Glacier Flow\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/7c3916cddb3a9663f05c41ab1762416b.png\" alt=\"Preview\"></div></div>\n<p>You can see that the title is already boldfaced and has some space around it.\nHowever, it is left-aligned and not exactly 17pt large. Hence, we need to adjust\nits appearance. The title function does not come with any arguments for\nfont or text size we could set. Instead, these properties are defined on the\n<code>text</code> and <code>align</code> functions.</p>\n<div class=\"info-box\">\n<p>What is the difference between what the <code>title</code> function inserted and the\nheadings we produced with equals signs?</p>\n<p>Headings, even first-level headings, can appear multiple times in your document\nwhereas a title only appears once, usually at the beginning. Differentiating\nbetween the two helps Typst make your document accessible for users of\nAssistive Technology such as screen readers.</p>\n</div>\n<p>When we want to customize the properties of some element inside of another kind\nof element, we can use show-set rules. First, we use <code>show</code> to select which\nelement we want to customize. We call this a <em>selector.</em> Then, we type a colon.\nNext, we write the set rule that should apply to elements matching the selector.\nSummarized, the syntax looks like this:</p>\n<pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">your-selector</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">some-element</span><span class=\"typ-punct\">(</span><span class=\"typ-comment\">/* ... */</span><span class=\"typ-punct\">)</span>\n</code></pre>\n<p>Let's recall: We want to center-align the title and make it 17pt large. Hence,\nwe need two show-set rules:</p>\n<ul>\n<li>One with the selector <code>title</code> and the rule <code><span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">17pt</span><span class=\"typ-punct\">)</span></code></li>\n<li>One with the selector <code>title</code> and the rule <code><span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span></code></li>\n</ul>\n<p>Our example now looks like this:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">title</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">17pt</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">title</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">title</span><span class=\"typ-punct\">[</span>\n  A Fluid Dynamic Model\n  for Glacier Flow\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/c2969040db7c93ade24a461b5ba45124.png\" alt=\"Preview\"></div></div>\n<p>This looks right. Let's also add the author list: Since we are writing this\npaper together with our supervisor, we'll add our own and their name.</p>\n<div class=\"previewed-code\"><pre><code>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">grid</span><span class=\"typ-punct\">(</span>\n  columns<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">1fr</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">1fr</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">,</span>\n  <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n    Therese Tungsten <span class=\"typ-escape\">\\</span>\n    Artos Institute <span class=\"typ-escape\">\\</span>\n    <span class=\"typ-func\">#</span><span class=\"typ-func\">link</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;mailto:tung@artos.edu&quot;</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-punct\">]</span><span class=\"typ-punct\">,</span>\n  <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n    Dr. John Doe <span class=\"typ-escape\">\\</span>\n    Artos Institute <span class=\"typ-escape\">\\</span>\n    <span class=\"typ-func\">#</span><span class=\"typ-func\">link</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;mailto:doe@artos.edu&quot;</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-punct\">]</span>\n<span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/4790f48caf3dcd84b8fea8c0326a2aee.png\" alt=\"Preview\"></div></div>\n<p>著者情報が記載された2つのブロックが隣り合わせにレイアウトされています。\nこのレイアウトを作るために<a href=\"/docs/reference/layout/grid/\"><code>grid</code></a>関数を使っています。\nこれにより、各列の大きさや、どのコンテンツをどのセルに入れるかを正確に制御することができます。\n<code>columns</code>引数には、<a href=\"/docs/reference/layout/relative/\">相対長さ</a>または<a href=\"/docs/reference/layout/fraction/\">割合</a>の配列を渡します。\nこの場合、2つの等しい割合のサイズを渡し、使用可能なスペースを2つの等しい列に分割するように指示します。\n次に、grid関数に2つのコンテンツ引数を渡しました。\nひとつは主著者であるあなたの情報で、もうひとつは指導教員の情報です。\nここでも <code>align</code> 関数を使用して、コンテンツを列の中央に配置しています。\ngrid関数はセルを指定するコンテンツ引数を任意の数で受け取れます。\n行は自動的に追加されますが、<code>rows</code>引数で手動でサイズを指定することも可能です。</p>\n<p>Looking at the authors and the title, they are a bit too close together. You can\naddress this by using another show-set rule to configure the space below the\ntitle. The title, the grid, paragraphs, and all other elements that Typst\narranges from the top to the bottom of the page are called <em>blocks.</em> Each block\nis controlled by the <a href=\"/docs/reference/layout/block/\"><code>block</code></a> function. It controls behaviors like their\ndistance and whether a block can contain a page break. That means that we can\nwrite another show-set rule that selects the title to set the block spacing:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">title</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">17pt</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">title</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">title</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">block</span><span class=\"typ-punct\">(</span>below<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1.2em</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">title</span><span class=\"typ-punct\">[</span>\n  A Fluid Dynamic Model\n  for Glacier Flow\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">grid</span><span class=\"typ-punct\">(</span>\n  <span class=\"typ-comment\">// ...</span>\n<span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/bba2b16bdf14870a0d236a8c3a62a89f.png\" alt=\"Preview\"></div></div>\n<p>With this show-set rule, we overrode the spacing below the title. We have used\nthe <code>em</code> unit: It allows us to express lengths as multiples of the font size.\nHere, we used it to space the title and the author list exactly 1.2× the font\nsize apart.</p>\n<p>それでは、アブストラクトを追加しましょう。\n学会は、アブストラクトを中央に配置することを望んでいることを忘れないでください。\nNow, let's add the abstract. Remember that the conference wants the abstract to be set ragged and centered.</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-escape\">...</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n  <span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">par</span><span class=\"typ-punct\">(</span>justify<span class=\"typ-punct\">:</span> <span class=\"typ-key\">false</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-strong\">*Abstract*</span> <span class=\"typ-escape\">\\</span>\n  <span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">80</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/41f337ec4affe1f096129a26c54f7f2e.png\" alt=\"Preview\"></div></div>\n<p>できました！特筆すべき点は、<code>align</code>のコンテンツ引数の中にあるsetルールを使って、アブストラクトの両端揃えをオフにしたことです。\nこれは、最初のsetルールの後に指定されたにもかかわらず、文書の残りの部分には影響しません。\nコンテンツ・ブロック内で設定されたものは、そのブロック内のコンテンツにのみ影響します。</p>\n<p>Another tweak could be to remove the duplication between the header and the\ntitle element's argument. Since they share the title, it would be convenient to\nstore it in a place designed to hold metadata about the document. We would then\nneed a way to retrieve the title in both places. The <code>document</code> element can help\nus with the former: By using it in a set rule, we can store document metadata\nlike title, description, and keywords.</p>\n<pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">document</span><span class=\"typ-punct\">(</span>title<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">[</span>A Fluid Dynamic Model for Glacier Flow<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n</code></pre>\n<p>When exporting a PDF, the title set here will appear in the title bar of your\nPDF reader. Your operating system will also use this title to make the file\nretrievable with search. Last but not least, it contributes to making your\ndocument more accessible and is required if you choose to comply with PDF/UA, a\nPDF standard focused on accessibility.</p>\n<p>Now, we need a way to retrieve the value we set in the main title and the\nheader. Because the <code>title</code> function is designed to work together with the\n<code>document</code> element, calling it with no arguments will just print the title. For\nthe header, we will need to be more explicit: Because Typst has no way of\nknowing that we want to insert the title there, we will need to tell it to do so\nmanually.</p>\n<p>Using <em>context,</em> we can retrieve the contents of any values we have set on\nelements before. When we use the <code><span class=\"typ-key\">context</span></code> keyword, we can access any property\nof any element, including the document element's title property. Its use looks\nlike this:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">document</span><span class=\"typ-punct\">(</span>title<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">[</span>\n  A Fluid Dynamic Model\n  for Glacier Flow\n<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-escape\">...</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>\n  header<span class=\"typ-punct\">:</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>\n    right <span class=\"typ-op\">+</span> horizon<span class=\"typ-punct\">,</span>\n    <span class=\"typ-comment\">// Retrieve the document</span>\n    <span class=\"typ-comment\">// element&#39;s title property.</span>\n    <span class=\"typ-key\">context</span> document<span class=\"typ-punct\">.</span>title<span class=\"typ-punct\">,</span>\n  <span class=\"typ-punct\">)</span><span class=\"typ-punct\">,</span>\n  <span class=\"typ-op\">..</span><span class=\"typ-punct\">.</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">title</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/85bf6573d540726e2be8d209538c611f.png\" alt=\"Preview\"></div></div>\n<p>Well done! One notable thing is that we used a set rule within the content\nargument of <code>align</code> to turn off justification for the abstract. This does not\naffect the remainder of the document even though it was specified after the\nfirst set rule because content blocks <em>scope</em> styling. Anything set within a\ncontent block will only affect the content within that block.</p>\n<p>Another tweak could be to remove the duplication between the header and the\ntitle element's argument. Since they share the title, it would be convenient to\nstore it in a place designed to hold metadata about the document. We would then\nneed a way to retrieve the title in both places. The <code>document</code> element can help\nus with the former: By using it in a set rule, we can store document metadata\nlike title, description, and keywords.</p>\n<pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">document</span><span class=\"typ-punct\">(</span>title<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">[</span>A Fluid Dynamic Model for Glacier Flow<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n</code></pre>\n<p>When exporting a PDF, the title set here will appear in the title bar of your\nPDF reader. Your operating system will also use this title to make the file\nretrievable with search. Last but not least, it contributes to making your\ndocument more accessible and is required if you choose to comply with PDF/UA, a\nPDF standard focused on accessibility.</p>\n<p>Now, we need a way to retrieve the value we set in the main title and the\nheader. Because the <code>title</code> function is designed to work together with the\n<code>document</code> element, calling it with no arguments will just print the title. For\nthe header, we will need to be more explicit: Because Typst has no way of\nknowing that we want to insert the title there, we will need to tell it to do so\nmanually.</p>\n<p>Using <em>context,</em> we can retrieve the contents of any values we have set on\nelements before. When we use the <code><span class=\"typ-key\">context</span></code> keyword, we can access any property\nof any element, including the document element's title property. Its use looks\nlike this:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">document</span><span class=\"typ-punct\">(</span>title<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">[</span>\n  A Fluid Dynamic Model\n  for Glacier Flow\n<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-escape\">...</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>\n  header<span class=\"typ-punct\">:</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>\n    right <span class=\"typ-op\">+</span> horizon<span class=\"typ-punct\">,</span>\n    <span class=\"typ-comment\">// Retrieve the document</span>\n    <span class=\"typ-comment\">// element&#39;s title property.</span>\n    <span class=\"typ-key\">context</span> document<span class=\"typ-punct\">.</span>title<span class=\"typ-punct\">,</span>\n  <span class=\"typ-punct\">)</span><span class=\"typ-punct\">,</span>\n  <span class=\"typ-op\">..</span><span class=\"typ-punct\">.</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">title</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-escape\">...</span>\n\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/15b893af691b49beed091b0e62baa2df.png\" alt=\"Preview\"></div></div>\n<p>First, notice how we called the title function with empty, round\nparentheses. Because no argument was passed, it defaulted to what we set for the\ndocument element above. The distinction between empty round and empty square\nbrackets is important: While empty round brackets show that you are passing\nnothing, empty square brackets mean that you are passing one argument: an empty\ncontent block. If called that way, the title would have no visible content.</p>\n<p>Next, take a look at the header. Instead of the title in square parentheses, we\nused the context keyword to access the document title. This inserted exactly\nwhat we set above. The role of context is not limited to accessing properties:\nWith it, you can check if some elements are present in the document, measure the\nphysical dimensions of others, and more. Using context, you can build powerful\ntemplates that react to the preferences of the end-user.</p>\n<div class=\"info-box\">\n<details>\n<summary>\nWhy is the context keyword required to access element properties?\n</summary>\n<p>Normally, when we access a variable, we know exactly what its value is going to\nbe:</p>\n<ul>\n<li>The variable could be a constant built into Typst, like <code><span class=\"typ-pol\">#</span><span class=\"typ-pol\">sym</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">pi</span></code></li>\n<li>The variable could be defined by an argument</li>\n<li>The variable could be defined or overwritten in the current scope</li>\n</ul>\n<p>However, sometimes, that's not enough. In this chapter of the tutorial, we have\ninserted a page header with the title. Even though we pass only one piece of\ncontent for the header, we may want different pages to have different headers.\nFor example, we may want to print the chapter name or use the page number. When\nwe use context, we can write a single context block that tells Typst to take a\nlook at where it's inserted, look for the last heading, the current page number,\nor anything else, and go from there. That means that the same context block,\ninserted on different pages, can produce different output.</p>\n<p>For more information, read up on context <a href=\"/docs/reference/context/\">in its docs</a> after\ncompleting this tutorial.</p>\n</details>\n</div>\n<h2 id=\"columns-and-headings\">段組みと見出しの追加</h2>\n<p>上の論文は、残念ながら文字が単調にぎっしり詰まっていて読みにくい見た目をしています。\nこれを修正するために、見出しを追加し、2段組のレイアウトに変更してみましょう。\n幸いなことに、setルールで<code>page</code>に<code>column</code>引数を追加することで簡単に行えます。</p>\n<p>引数リストに<code>columns: <span class=\"typ-num\">2</span></code>を加えることで、文書全体を2段組みとなります。\nしかし、これではタイトルと著者、アブストラクトにも影響が出てしまいます。\nそれらを1段組みのままに維持するためには、<a href=\"/docs/reference/layout/place/\"><code>place</code></a>関数を呼び出して囲みましょう。\nplace関数は引数として配置とコンテンツを受け取ります。\nオプション引数である<code>scope</code>引数を使えば、現在の段組みとその親（ページ）のどちらに対して配置するかを決めることが可能です。\nこれらに加えて、もうひとつ設定することがあります。\nオプション引数がない場合、<code>place</code>はそのコンテンツを文書の流れから外し、他のレイアウトに影響を与えることなく、他のコンテンツの上に配置します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-func\">#</span><span class=\"typ-func\">place</span><span class=\"typ-punct\">(</span>\n  top <span class=\"typ-op\">+</span> center<span class=\"typ-punct\">,</span>\n  <span class=\"typ-func\">rect</span><span class=\"typ-punct\">(</span>fill<span class=\"typ-punct\">:</span> black<span class=\"typ-punct\">)</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">30</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/df4b3b714f57dfa956dbceab25713747.png\" alt=\"Preview\"></div></div>\n<p>もしここで<code>place</code>を使わなければ、黒塗りの長方形は独立した行になるはずですが、\n<code>place</code>を使うと、それに続く数行のテキストの上に重なります。\n同様に、テキスト側もこの長方形がないかのように振る舞います。\nこの動作を変更するには、引数<code>float: <span class=\"typ-key\">true</span></code>を渡してください。\nこれにより<code>place</code>でページの上部または下部に配置されたアイテムが、他のコンテンツと重ならないように設定できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>\n  paper<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;us-letter&quot;</span><span class=\"typ-punct\">,</span>\n  header<span class=\"typ-punct\">:</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>\n    right <span class=\"typ-op\">+</span> horizon<span class=\"typ-punct\">,</span>\n    <span class=\"typ-key\">context</span> document<span class=\"typ-punct\">.</span>title<span class=\"typ-punct\">,</span>\n  <span class=\"typ-punct\">)</span><span class=\"typ-punct\">,</span>\n  numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1&quot;</span><span class=\"typ-punct\">,</span>\n  columns<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">place</span><span class=\"typ-punct\">(</span>\n  top <span class=\"typ-op\">+</span> center<span class=\"typ-punct\">,</span>\n  float<span class=\"typ-punct\">:</span> <span class=\"typ-key\">true</span><span class=\"typ-punct\">,</span>\n  scope<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;parent&quot;</span><span class=\"typ-punct\">,</span>\n  clearance<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2em</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n  <span class=\"typ-escape\">...</span>\n\n  <span class=\"typ-func\">#</span><span class=\"typ-func\">par</span><span class=\"typ-punct\">(</span>justify<span class=\"typ-punct\">:</span> <span class=\"typ-key\">false</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n    <span class=\"typ-strong\">*Abstract*</span> <span class=\"typ-escape\">\\</span>\n    <span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">80</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-punct\">]</span>\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-heading\">= Introduction</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">300</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Related Work</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">200</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/7423f42127d2f3c6b66ce2764863df00.png\" alt=\"Preview\"></div></div>\n<p>この例では、<code>place</code> 関数の <code>clearance</code> 引数も使用しています。\nこれにより、<a href=\"/docs/reference/layout/v/\"><code>v</code></a>関数を使用する代わりに、本文との間にスペースを設けています。\nまた、コンテンツはcenter引数を継承しているため、各パーツごとに行っていた明示的な <code><span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">,</span> <span class=\"typ-op\">..</span><span class=\"typ-punct\">.</span><span class=\"typ-punct\">)</span></code> 呼び出しも削除できます。</p>\n<p>最後に見出しのスタイルの設定をしましょう。\nガイドラインに従うために、見出しは中央揃えにして、小さな大文字を使わなければなりません。\n<code>heading</code>関数はそのような設定を提供していないため、独自の見出しshowルールを書く必要があります。</p>\n<ul>\n<li>A show-set rule to make headings center-aligned</li>\n<li>A show-set rule to make headings 13pt large and use the regular weight</li>\n<li>A show rule to wrap the headings in a call to the <code>smallcaps</code> function</li>\n</ul>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>\n  size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">13pt</span><span class=\"typ-punct\">,</span>\n  weight<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;regular&quot;</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">:</span> <span class=\"typ-func\">smallcaps</span>\n\n<span class=\"typ-escape\">...</span>\n\n<span class=\"typ-heading\">= Introduction</span>\n<span class=\"typ-escape\">...</span>\n\n<span class=\"typ-heading\">== Motivation</span>\n<span class=\"typ-escape\">...</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/484bf0b02bc25230ddf8cb08f231826c.png\" alt=\"Preview\"></div></div>\n<p>This looks great! We used show rules that apply to all headings. In the final\nshow rule, we applied the <code>smallcaps</code> function to the complete heading. As we\nwill see in the next example, we can also provide a custom rule to completely\noverride the default look of headings.</p>\n<p>The only remaining problem is that all headings look the same now. The\n&quot;Motivation&quot; and &quot;Problem Statement&quot; subsections ought to be italic run-in\nheaders, but right now, they look indistinguishable from the section headings.\nWe can fix that by using a <code>where</code> selector on our show rule: This is a\n<a href=\"/docs/reference/scripting/#methods\">method</a> we can call on headings (and other elements) that\nallows us to filter them by their properties. We can use it to differentiate\nbetween section and subsection headings:</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">13pt</span><span class=\"typ-punct\">,</span> weight<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;regular&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> <span class=\"typ-func\">smallcaps</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>\n  size<span class=\"typ-punct\">:</span> <span class=\"typ-num\">11pt</span><span class=\"typ-punct\">,</span>\n  weight<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;regular&quot;</span><span class=\"typ-punct\">,</span>\n  style<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;italic&quot;</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> it <span class=\"typ-op\">=&gt;</span> <span class=\"typ-punct\">{</span>\n  it<span class=\"typ-punct\">.</span>body <span class=\"typ-op\">+</span> <span class=\"typ-punct\">[</span>.<span class=\"typ-punct\">]</span>\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/c988e50827cad35a48eef259d8ef12ae.png\" alt=\"Preview\"></div></div>\n<p>In this example, we first scope our previous rules to first-level headings by\nusing <code>.<span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span></code> to make the selector more specific. Then, we add a\nshow-set rule for the second heading level. Finally, we need a show rule with a\ncustom function: Headings enclose their contents with a block by default. This\nhas the effect that the heading gets its own line. However, we want it to run\ninto the text, so we need to provide our own show rule to get rid of this block.</p>\n<p>We provide the rule with a function that takes the heading as a parameter.\nThis parameter is conventionally called <code>it</code>, but can have another name. The\nparameter can be used as content and will just display the whole default\nheading. Alternatively, when we want to build our own heading instead, we can\nuse its fields like <code>body</code>, <code>numbering</code>, and <code>level</code> to compose a custom look.\nHere, we are just printing the body of the heading with a trailing dot and leave\nout the block that the built-in show rule produces. Note that this heading will\nno longer react to set rules for heading numbering and similar because we did\nnot explicitly use <code>it.numbering</code> in the show rule. If you are writing show\nrules like this and want the document to remain customizable, you will need to\ntake these fields into account.</p>\n<p>これは素晴らしい！\n第1レベルと第2レベルの見出しにそれぞれ選択的に適用される2つのshowルールを書きました。\n<code>where</code>セレクタを使用して、見出しをレベルでフィルタリングしました。\nそして、サブセクションの見出しを本文と改行せずにレンダリングしました。\nまた、サブセクションの見出しの最後にピリオドを自動的に追加してます。</p>\n<p>ここで、学会のスタイルガイドを確認しましょう。</p>\n<ul>\n<li>フォントは11ptのセリフ体 ✓</li>\n<li>タイトルは17ptで太字 ✓</li>\n<li>アブストラクトは1段組みで本文は2段組み ✓</li>\n<li>アブストラクトは中央揃え ✓</li>\n<li>本文は両端揃え ✓</li>\n<li>第1レベルのセクションの見出しは13ptで中央に配置し、小さな大文字で表示 ✓</li>\n<li>第2レベルの見出しは斜体で、本文と同じ大きさ ✓</li>\n<li>ページはUSレターサイズとし、下中央にページ番号を付け、各ページの右上に論文のタイトルを記載 ✓</li>\n</ul>\n<p>これで、全てのスタイルに準拠し、論文を学会に提出できます！完成した論文は次のようになっています。\n<img\n  src=\"/docs/assets/3-advanced-paper.png\"\n  alt=\"The finished paper\"\n  style=\"box-shadow: 0 4px 12px rgb(89 85 101 / 20%); width: 500px; max-width: 100%; display: block; margin: 24px auto;\"\n></p>\n<h2 id=\"まとめ\">まとめ</h2>\n<p>このセクションでは、ヘッダーとフッターの作成方法、関数とスコープを使用してローカルにスタイルをオーバーライドする方法、<a href=\"/docs/reference/layout/grid/\" title=\"`grid`\"><code>grid</code></a>関数を使用してより複雑なレイアウトを作成する方法、個々の関数と文書全体のshowルールを記述する方法を学びました。\nYou also learned how to access element properties with context.\nまた、<a href=\"/docs/reference/styling/#show-rules\"><code>where</code>セレクタ</a>を使用して、見出しをそのレベルによってフィルタリングする方法も学びました。</p>\n<p>結果として論文は大成功でした！\nあなたはその学会にて同じ志を持つ研究者にたくさん出会い、来年同じ学会で発表したいプロジェクトを計画しています。\nその際に、同じスタイルガイドを使って新しい論文を書く必要があるため、あなたやあなたのチームのために、時間を節約できるテンプレートを作りたいと思うのではないでしょうか？</p>\n<p>次のセクションでは、複数の文書で再利用できるテンプレートの作成方法を学びます。\nこれはより高度なトピックですので、今すぐには手が出せないという方は、後ほどお気軽にお越しください。</p>"}}