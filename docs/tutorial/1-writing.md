---
description: Typst 的教程。
---
# Typstで執筆するには

さあ始めましょう！大学で専門的なレポートを書くことになったとします。そのレポートには、文章、数式、見出し、図が含まれます。
書き始めるには、まずTypst appで新しいプロジェクトを作成します。エディターに移動すると、2つのパネルが表示されます。
1つは文書を作成するソースパネル、もう1つはレンダリングされた文書が表示されるプレビューパネルです。

![Typst app screenshot](1-writing-app.png)

レポートの良い切り口はすでに考えてあるので、まずは導入を書いてみましょう。
エディターパネルにいくつかのテキストを入力してください。テキストがすぐにプレビューページに表示されるのがわかるでしょう。

```example
In this report, we will explore the
various factors that influence fluid
dynamics in glaciers and how they
contribute to the formation and
behavior of these natural structures.
```

_このチュートリアル全体を通して、このようなコード例を紹介します。アプリと同様に、最初のパネルにはマークアップが含まれ、2番目のパネルにはプレビューが表示されます。何が起こっているかわかりやすいように例に合わせてページを縮小しています。_

次のステップは、見出しを追加して、いくつかのテキストを強調することです。
Typstでは、最も一般的な書式設定タスクに対してシンプルなマークアップを使用します。見出しを追加するには `=` の文字を入力し、テキストを斜体で強調するには、それを `[_アンダースコア_]` で囲みます。

```example
= Introduction
In this report, we will explore the
various factors that influence _fluid
dynamics_ in glaciers and how they
contribute to the formation and
behavior of these natural structures.
```

簡単でしたね！新しい段落を追加するには、2行のテキストの間に空行を追加するだけです。
その段落に小見出しが必要な場合は、`=` の代わりに `==` を入力して作成します。
`=` の数が見出しのネストレベルを決定します。

次に、氷河の動態に影響を与えるいくつかの要因を列挙したいと思います。
そのためには、番号付きリストを使用します。リストの各項目には、行の先頭に `+` 文字を入力します。
Typst は項目を自動的に番号付けします。

```example
+ The climate
+ The topography
+ The geology
```

箇条書きリストを追加したい場合は、`+` 文字の代わりに `-` 文字を使用します。
また、リストをネストすることもできます。
例えば、上記のリストの最初の項目にサブリストを追加するには、それをインデントします。

```example
+ The climate
  - Temperature
  - Precipitation
+ The topography
+ The geology
```

## 図表を追加する

あなたはレポートに図表を追加するともっと良くなると考えています。
Typstでは、PNG、JPEG、GIF、SVGの形式の画像をサポートしています。
プロジェクトに画像ファイルを追加するには、まず左サイドバーのボックスアイコンをクリックして _ファイルパネル_ を開きます。
ここにはプロジェクト内のすべてのファイルのリストが表示されます。
現在、ここにあるのはあなたが書いているメインのTypstファイルだけです。
別のファイルをアップロードするには、右上隅の矢印のボタンをクリックします。
これによりアップロードダイアログが開き、コンピュータからアップロードするファイルを選択できます。
レポートに用いる画像ファイルを選んでください。

![Upload dialog](1-writing-upload.png)

以前にも見てきたように、Typstでは特定の記号（ _マークアップ_ と呼ばれる）が特有の意味を持ちます。
`=`、`-`、`+`、`_` をそれぞれ見出し、リスト、強調テキストを作成するために使用することができます。
しかし、文書に挿入したいもの全てに特別な記号を割り当てると、すぐに分かりづらく、そして扱いづらくなってしまいます。
そのため、Typstでは一般的なものにのみマークアップ記号を用意し、
それ以外のものは _関数_ を使って挿入します。
ページに画像を表示させるためには、Typstの [`image`] 関数を使用します。

```example
#image("glacier.jpg")
```

一般的に、関数は一連の _引数_ に対して何らかの出力を生成します。
マークアップ内で関数を _呼び出す_ 場合、引数を指定し、Typstはその結果（関数の _戻り値_ ）を文書に挿入します。
今回の場合、`image` 関数は一つの引数として画像ファイルへのパスを受け取ります。
マークアップで関数を呼び出すには、まず `#` 文字を入力し、直後に関数の名前を記述します。
その後、引数を丸括弧で囲みます。
Typstは引数リスト内でさまざまなデータ型を認識します。
私たちの画像のファイルパスは短い [文字列]($str) ですので、二重引用符で囲む必要があります。

挿入された画像はページ全体の幅を使用します。それを変更するには、`image` 関数に `width `引数を渡します。
これは _名前付き_ 引数であり、`name: value` の形式で指定されます。
複数の引数がある場合は、カンマで区切りますので、まずパスの後ろにカンマを付ける必要があります。

```example
#image("glacier.jpg", width: 70%)
```

`width` 引数は [相対長さ]($relative) です。
この場合、画像がページの幅の `{70%}` を占めるようにパーセンテージを指定しました。
また、`{1cm}` や `{0.7in}` のような絶対値を指定することもできます。

テキストと同様に、画像もデフォルトではページの左側に配置されます。また、キャプションが欠けています。
これを修正するために、[figure]($figure) 関数を使用しましょう。
この関数は図表の内容を位置引数として取り、オプションでキャプションを名前付き引数として指定できます。

`figure` 関数の引数リスト内では、Typstは既にコードモードになっています。
これは、 `image` 関数の呼び出し前にあるハッシュを削除する必要があることを意味します。
ハッシュは、マークアップ内で直接必要な場合（テキストと関数呼び出しを区別するため）だけ使います。

キャプションは任意のマークアップで構成されます。
関数にマークアップを与えるためには、それを角括弧で囲みます。この構造は _コンテンツブロック_ と呼ばれます。

```example
#figure(
  image("glacier.jpg", width: 70%),
  caption: [
    _Glaciers_ form an important part
    of the earth's climate system.
  ],
)
```

あなたはレポートの執筆を続け、次に図を参照したいと考えています。
その場合、まず図にラベルを付けます。
まず図にラベルを付けます。ラベルは文書内の要素を一意に識別します。図の後に名前を山括弧で囲んで追加します。
次に、テキスト内でその名前の前に `[@]` 記号を書いて図を参照できます。
見出しや方程式もラベルを付けて参照可能にすることができます。

```example
Glaciers as the one shown in
@glaciers will cease to exist if
we don't take action soon!

#figure(
  image("glacier.jpg", width: 70%),
  caption: [
    _Glaciers_ form an important part
    of the earth's climate system.
  ],
) <glaciers>
```

<div class="info-box">

これまでに、コンテンツブロック（角括弧内のマークアップ）と文字列（二重引用符内のテキスト）を関数に渡してきました。
どちらもテキストを含んでいるように見えますが、違いは何でしょうか？

コンテンツブロックはテキストを含むことができますが、それ以外にもさまざまなマークアップ、関数呼び出しなどを含むことができます。
一方、文字列は本当に _文字の並び_ に過ぎません。

例えば、image 関数は画像ファイルへのパスを期待しています。ここに段落のテキストや別の画像をパスパラメータとして渡すのは意味がありません。
そのため、ここでは文字列のみが許可されます。
逆に、文字列はコンテンツが期待される場所ならどこでも機能します。なぜなら、テキストは有効なコンテンツの一種だからです。

</div>

## 参考文献の追加 { #bibliography }

在撰写报告时，您需要引用资料来支持您的一些论证。
您可以使用 [`bibliography`]($bibliography) 函数向文档添加参考文献。
此函数需要参考文献文件的路径。

Typst 的原生参考文献格式是 [Hayagriva](https://github.com/typst/hayagriva/blob/main/docs/file-format.md)，
考虑到兼容性，Typst 同样支持 BibLaTeX 文件。
由于您的同学已经完成了文献调查并向您发送了 `.bib` 文件，您可以直接使用该文件。
请在文件面板中上传文件，以在 Typst App 中访问它。

一旦文档引入了参考文献，您就可以引用它了。
引用参考文献的语法与对标签的引用相同。在您第一次引用一个资料来源后，它就会出现在您文档的参考文献部分。
Typst 支持不同的引用和参考文献样式。有关的详细信息，请阅读 [参考]($bibliography.style)。

```example
= Methods
We follow the glacier melting models
established in @glacier-melt.

#bibliography("works.bib")
```

## 数学

充实了方法部分后，您继续完成这篇文稿的实质部分：数学公式。
Typst 具有内置的数学排版引擎，并使用自己的数学记号。
让我们从一个简单的等式开始。我们使用 `[$]` 符号括住它，让 Typst 知道它正在处理一个数学表达式：

```example
The equation $Q = rho A v + C$
defines the glacial flow rate.
```

公式是内联排版的，与周围的文本在同一行上。
如果你想把它放在它自己的新行上，你应该在其开头和结尾插入一个空格：

```example
The flow rate of a glacier is
defined by the following equation:

$ Q = rho A v + C $
```

我们可以看到，Typst 按原样显示单个字母 `Q`，`A`，`v` 和 `C`，而它将 `rho` 翻译成希腊字母。
数学模式将始终原样地显示单个字母。然而，多个字母将被视作为符号、变量或函数名称。
要隐式地表明这是单个字母之间的乘法，请在它们之间加入空格。

如果你想要一个由多个字母组成的变量，你可以用引号括起来：

```example
The flow rate of a glacier is given
by the following equation:

$ Q = rho A v + "time offset" $
```

您还需要在论文中加入一个求和公式。
我们可以使用 `sum` 符号，然后在下标和上标中指定求和的范围：

```example
Total displaced soil by glacial flow:

$ 7.32 beta +
  sum_(i=0)^nabla Q_i / 2 $
```

要向符号或变量添加下标，请输入 `_` 字符，然后输入下标。
同样，为上标使用 `^` 字符。
如果下标或上标由多个内容部分组成，则必须将它们括在圆括号中。

上面的例子还向我们展示了如何插入分数：
只需在分子和分母之间放置一个 `/` 字符，Typst 就会自动将其变成分数。
括号会被巧妙地解析，因此您可以像在计算器中一样输入数学表达式，
Typst 将用适当的符号替换括号中的子表达式。

```example
Total displaced soil by glacial flow:

$ 7.32 beta +
  sum_(i=0)^nabla
    (Q_i (a_i - epsilon)) / 2 $
```

并非所有数学结构都有特殊的语法。
作为替代，我们会使用函数，就像我们之前看到的 `image` 函数一样。
例如，要插入列向量，我们可以使用 [`vec`]($math.vec) 函数。
在数学模式下，函数调用不需要以 `#` 字符开头。

```example
$ v := vec(x_1, x_2, x_3) $
```

某些函数仅在数学模式下可用。
例如，[`cal`]($math.cal) 函数用于排版通常用于集合论的书法字母。
[参考中的数学部分]($category/math) 提供了数学模式支持的所有函数的完整列表。

还有一件事：许多符号（如箭头）有很多变体。
您可以通过在符号名称后附加点和修饰符名称来选择这些变体：

```example
$ a arrow.squiggly b $
```

这种记号在标记模式下也可以使用，但符号名称前面必须带有 `#sym`。
有关所有可用符号的列表，请参阅 [符号部分]($category/symbols/sym)。

## 回顾

现在您已经了解了如何在 Typst 中编写基本的文档，包括如何强调文本、编写列表、插入图像、对齐内容和排版数学表达式。
您还了解了 Typst 的函数机制。
Typst 允许您将更多种类的内容插入到文档中，例如 [表格]($table)、[形状]($category/visualize) 和 [代码块]($raw)。
您可以仔细阅读 [参考]($reference) 以了解有关这些函数和其他函数的更多信息。

目前，您已完成报告的编写。
您已经通过单击右上角的下载按钮保存了 PDF。
但您可能认为报告看起来不应该那么朴素。
在下一节中，我们将学习如何自定义文档的外观。
