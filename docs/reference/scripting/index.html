

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>脚本 – Typst 中文文档</title>
  <meta name="description" content="使用 Typst 的脚本功能使得文档更加自动化。">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#239dad">
  <meta property="og:url" content="https://typst-doc-cn.github.io/docs/reference/scripting/">
  <meta property="og:title" content="脚本 – Typst 中文文档">
  <meta property="og:site_name" content="Typst">
  <meta property="og:description" content="使用 Typst 的脚本功能使得文档更加自动化。">
  <meta property="og:type">
  <meta property="og:image" content="https://typst-doc-cn.github.io/assets/social.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:site" content="@typstapp">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://typst-doc-cn.github.io/docs/reference/scripting/">
  <meta name="twitter:image:alt"
    content="The left side of a text editor with colorful cursors, as well as the text &#x27;Compose papers faster, Typst&#x27;">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico">
  <!-- <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico"> -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#239dad">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="stylesheet" href="/styles/default.css?bust=20230913?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs.css?bust=20230915?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs-cn.css">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Regular.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Bold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-SemiBold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/CascadiaMono-Regular-Sub.woff2" as="font">
  <link rel="preload" href="/assets/images/blur.webp" as="image">
  
  <script>document.documentElement.className = document.documentElement.className.replace("no-js", "js"), document.addEventListener("DOMContentLoaded", (() => { const e = document.cookie.split("; ").find((e => e.startsWith("INSECURE_SIGNED_IN=")))?.split("=")[1].toLowerCase(); if ("1" === e || "true" === e || "yes" === e) { document.documentElement.classList.add("signed-in"); const e = document.querySelector("header nav a.nav-btn"), t = document.querySelector("header nav a.sign-in"); e && (e.innerHTML = "Go to app", e.setAttribute("href", "/app/")), t && (t.innerHTML = "Sign out", t.setAttribute("href", "https://api.typst.app/v1/auth/logout")) } }))</script>
</head>

<body class="no-js docs has-outline">
  <div class="alert">
    <div class="alert-content">
      <span><b>注意：</b>该中文文档为社区驱动的非官网文档，可能存在错译、漏译或过时等问题，请以官网文档 <a href="https://typst.app/docs/">Documentation</a>
        为准，如发现错漏，也欢迎 <a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io">您的贡献</a>（<a href="https://gitee.com/orangex4/typst-doc-cn.github.io">镜像</a>）。Typst 非官方中文交流 QQ 群：793548390</span>
      <br />
      <span><b>Warning:</b> the Chinese document is a community-driven non-official document, there may be mistranslation, omission or outdated problems, please refer to <a href="https://typst.app/docs/">the official website documentation</a>.</span>
    </div>
  </div>
  <header class="boring">
    <div><a href="/docs" class="logo-box"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label">
          <title id="logo-label">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>中文文档</span></a><button class="hamburger"><img alt="Open navigation"
          src="/assets/icons/16-hamburger-dark.svg" width="16" height="16"></button>
      <nav>
        <ul>
          <li class="social"><a href="https://twitter.com/typstapp/"><svg width="16" height="16" role="img"
                aria-labelledby="svg-twitter-label">
                <title id="svg-twitter-label">Twitter</title>
                <use href="/assets/icons/social.svg#twitter"></use>
              </svg></a></li>
          <li class="social"><a href="https://discord.gg/2uDybryKPe"><svg width="16" height="16" role="img"
                aria-labelledby="svg-discord-label">
                <title id="svg-discord-label">Discord</title>
                <use href="/assets/icons/social.svg#discord"></use>
              </svg></a></li>
          <li class="social"><a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io"><svg width="16" height="16" role="img"
                aria-labelledby="svg-github-label">
                <title id="svg-github-label">GitHub</title>
                <use href="/assets/icons/social.svg#github"></use>
              </svg></a></li>
          <li class="social"><a href="https://www.linkedin.com/company/typst/"><svg width="16" height="16" role="img"
                aria-labelledby="svg-linkedin-label">
                <title id="svg-linkedin-label">LinkedIn</title>
                <use href="/assets/icons/social.svg#linkedin"></use>
              </svg></a></li>
          <li class="secondary"><a href="https://typst.app/">主页</a></li>
          <!-- <li class="secondary"><a href="/signin/" class="sign-in">Sign in</a></li>
          <li><a href="/signup" id="header-btn" class="nav-btn btn">Sign up</a></li> -->
        </ul>
      </nav>
    </div>
  </header>
  <div class="main-grid">
    <nav class="folding"><a href="/docs" class="title-row"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label-nav">
          <title id="logo-label-nav">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>中文文档</span></a>
      <button class="close"><img alt="Close" src="/assets/icons/16-close-dark.svg"
          width="16" height="16"></button>
      <div class="search"><img src="/assets/icons/16-search-gray.svg" alt="Search" width="16" height="16"><input
          type="search" placeholder="搜索" id="docs-search"></div>
      <ul class="search-results hidden" id="search-results"></ul>
      <ul>
        
        
        <li>
          <a href="/docs/" >概览</a>
          
        </li>
        
        
        <li>
          <a href="/docs/tutorial/" >教程</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/tutorial/writing-in-typst/" >使用 Typst 写作</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/formatting/" >格式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/advanced-styling/" >高级样式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/making-a-template/" >制作模板</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/chinese/" >中文用户指南</a>
          
        </li>
        
        
        <li>
          <a href="/docs/reference/" >参考</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            
            <li class="category">Language</li>
            
            <li>
              <a href="/docs/reference/syntax/" >语法</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/styling/" >样式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/scripting/"  aria-current="page" >脚本</a>
              
            </li>
            
            
            
            
            <li>
              <a href="/docs/reference/types/" >类型（旧）</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/types/none/" >None</a></li>
                
                
                <li><a href="/docs/reference/types/auto/" >Auto</a></li>
                
                
                <li><a href="/docs/reference/types/boolean/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/types/integer/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/types/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/types/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/types/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/types/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/types/relative-length/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/types/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/types/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/types/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/types/symbol/" >Symbol</a></li>
                
                
                <li><a href="/docs/reference/types/string/" >String</a></li>
                
                
                <li><a href="/docs/reference/types/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/types/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/types/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/types/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/types/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/types/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/types/module/" >Module</a></li>
                
              </ul>
              
            </li>

            
            <li class="category">Library</li>
            
            <li>
              <a href="/docs/reference/foundations/" >基础</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/foundations/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/foundations/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/foundations/assert/" >Assert</a></li>
                
                
                <li><a href="/docs/reference/foundations/bool/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/foundations/bytes/" >Bytes</a></li>
                
                
                <li><a href="/docs/reference/foundations/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/foundations/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/foundations/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/foundations/duration/" >Duration</a></li>
                
                
                <li><a href="/docs/reference/foundations/eval/" >Evaluate</a></li>
                
                
                <li><a href="/docs/reference/foundations/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/foundations/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/foundations/int/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/foundations/label/" >Label</a></li>
                
                
                <li><a href="/docs/reference/foundations/module/" >Module</a></li>
                
                
                <li><a href="/docs/reference/foundations/panic/" >Panic</a></li>
                
                
                <li><a href="/docs/reference/foundations/plugin/" >Plugin</a></li>
                
                
                <li><a href="/docs/reference/foundations/regex/" >Regex</a></li>
                
                
                <li><a href="/docs/reference/foundations/repr/" >Representation</a></li>
                
                
                <li><a href="/docs/reference/foundations/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/foundations/str/" >String</a></li>
                
                
                <li><a href="/docs/reference/foundations/style/" >Style</a></li>
                
                
                <li><a href="/docs/reference/foundations/type/" >Type</a></li>
                
                
                <li><a href="/docs/reference/foundations/version/" >Version</a></li>
                
                
                <li><a href="/docs/reference/foundations/sys" >System</a></li>
                
                
                <li><a href="/docs/reference/foundations/calc" >Calculation</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/model/" >模型</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/model/bibliography/" >参考文献</a></li>
                
                
                <li><a href="/docs/reference/model/list/" >Bullet List</a></li>
                
                
                <li><a href="/docs/reference/model/cite/" >引用</a></li>
                
                
                <li><a href="/docs/reference/model/document/" >文档</a></li>
                
                
                <li><a href="/docs/reference/model/emph/" >强调（斜体）</a></li>
                
                
                <li><a href="/docs/reference/model/figure/" >图表</a></li>
                
                
                <li><a href="/docs/reference/model/footnote/" >脚注</a></li>
                
                
                <li><a href="/docs/reference/model/heading/" >Heading</a></li>
                
                
                <li><a href="/docs/reference/model/link/" >Link</a></li>
                
                
                <li><a href="/docs/reference/model/enum/" >有序列表</a></li>
                
                
                <li><a href="/docs/reference/model/numbering/" >Numbering</a></li>
                
                
                <li><a href="/docs/reference/model/outline/" >Outline</a></li>
                
                
                <li><a href="/docs/reference/model/par/" >Paragraph</a></li>
                
                
                <li><a href="/docs/reference/model/parbreak/" >Paragraph Break</a></li>
                
                
                <li><a href="/docs/reference/model/quote/" >Quote</a></li>
                
                
                <li><a href="/docs/reference/model/ref/" >Reference</a></li>
                
                
                <li><a href="/docs/reference/model/strong/" >着重强调（加粗）</a></li>
                
                
                <li><a href="/docs/reference/model/table/" >Table</a></li>
                
                
                <li><a href="/docs/reference/model/terms/" >Term List</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/text/" >文本</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/text/highlight/" >文本高亮</a></li>
                
                
                <li><a href="/docs/reference/text/linebreak/" >换行</a></li>
                
                
                <li><a href="/docs/reference/text/lorem/" >假文</a></li>
                
                
                <li><a href="/docs/reference/text/lower/" >转小写</a></li>
                
                
                <li><a href="/docs/reference/text/overline/" >上划线</a></li>
                
                
                <li><a href="/docs/reference/text/raw/" >原始文本/代码块</a></li>
                
                
                <li><a href="/docs/reference/text/smallcaps/" >显示为小写</a></li>
                
                
                <li><a href="/docs/reference/text/smartquote/" >智能引号</a></li>
                
                
                <li><a href="/docs/reference/text/strike/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/text/sub/" >下标</a></li>
                
                
                <li><a href="/docs/reference/text/super/" >上标</a></li>
                
                
                <li><a href="/docs/reference/text/text/" >文本</a></li>
                
                
                <li><a href="/docs/reference/text/underline/" >下划线</a></li>
                
                
                <li><a href="/docs/reference/text/upper/" >转大写</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/math/" >数学</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/math/accent/" >重音符号</a></li>
                
                
                <li><a href="/docs/reference/math/cancel/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/math/cases/" >左大括号</a></li>
                
                
                <li><a href="/docs/reference/math/class/" >类</a></li>
                
                
                <li><a href="/docs/reference/math/equation/" >数学表达式</a></li>
                
                
                <li><a href="/docs/reference/math/frac/" >分数</a></li>
                
                
                <li><a href="/docs/reference/math/mat/" >矩阵</a></li>
                
                
                <li><a href="/docs/reference/math/op/" >文本运算符</a></li>
                
                
                <li><a href="/docs/reference/math/vec/" >向量</a></li>
                
                
                <li><a href="/docs/reference/math/underover" >上/下方内容</a></li>
                
                
                <li><a href="/docs/reference/math/variants" >字体变体</a></li>
                
                
                <li><a href="/docs/reference/math/sizes" >显示尺寸</a></li>
                
                
                <li><a href="/docs/reference/math/lr" >Left/Right</a></li>
                
                
                <li><a href="/docs/reference/math/styles" >显示样式</a></li>
                
                
                <li><a href="/docs/reference/math/roots" >根式</a></li>
                
                
                <li><a href="/docs/reference/math/attach" >附缀</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/symbols/" >符号</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/symbols/sym/" >通用</a></li>
                
                
                <li><a href="/docs/reference/symbols/emoji/" >表情符号</a></li>
                
                
                <li><a href="/docs/reference/symbols/symbol/" >符号</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/layout/" >布局</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/layout/align/" >Align</a></li>
                
                
                <li><a href="/docs/reference/layout/alignment/" >Alignment</a></li>
                
                
                <li><a href="/docs/reference/layout/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/layout/block/" >Block</a></li>
                
                
                <li><a href="/docs/reference/layout/box/" >Box</a></li>
                
                
                <li><a href="/docs/reference/layout/colbreak/" >Column Break</a></li>
                
                
                <li><a href="/docs/reference/layout/columns/" >Columns</a></li>
                
                
                <li><a href="/docs/reference/layout/direction/" >Direction</a></li>
                
                
                <li><a href="/docs/reference/layout/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/layout/grid/" >Grid</a></li>
                
                
                <li><a href="/docs/reference/layout/hide/" >Hide</a></li>
                
                
                <li><a href="/docs/reference/layout/layout/" >Layout</a></li>
                
                
                <li><a href="/docs/reference/layout/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/layout/measure/" >Measure</a></li>
                
                
                <li><a href="/docs/reference/layout/move/" >Move</a></li>
                
                
                <li><a href="/docs/reference/layout/pad/" >Padding</a></li>
                
                
                <li><a href="/docs/reference/layout/page/" >Page</a></li>
                
                
                <li><a href="/docs/reference/layout/pagebreak/" >Page Break</a></li>
                
                
                <li><a href="/docs/reference/layout/place/" >Place</a></li>
                
                
                <li><a href="/docs/reference/layout/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/layout/relative/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/layout/repeat/" >Repeat</a></li>
                
                
                <li><a href="/docs/reference/layout/rotate/" >Rotate</a></li>
                
                
                <li><a href="/docs/reference/layout/scale/" >Scale</a></li>
                
                
                <li><a href="/docs/reference/layout/h/" >Spacing (H)</a></li>
                
                
                <li><a href="/docs/reference/layout/v/" >Spacing (V)</a></li>
                
                
                <li><a href="/docs/reference/layout/stack/" >Stack</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/visualize/" >可视化</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/visualize/circle/" >Circle</a></li>
                
                
                <li><a href="/docs/reference/visualize/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/visualize/ellipse/" >Ellipse</a></li>
                
                
                <li><a href="/docs/reference/visualize/gradient/" >Gradient</a></li>
                
                
                <li><a href="/docs/reference/visualize/image/" >Image</a></li>
                
                
                <li><a href="/docs/reference/visualize/line/" >Line</a></li>
                
                
                <li><a href="/docs/reference/visualize/path/" >Path</a></li>
                
                
                <li><a href="/docs/reference/visualize/pattern/" >Pattern</a></li>
                
                
                <li><a href="/docs/reference/visualize/polygon/" >Polygon</a></li>
                
                
                <li><a href="/docs/reference/visualize/rect/" >Rectangle</a></li>
                
                
                <li><a href="/docs/reference/visualize/square/" >Square</a></li>
                
                
                <li><a href="/docs/reference/visualize/stroke/" >Stroke</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/introspection/" >内省</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/introspection/counter/" >Counter</a></li>
                
                
                <li><a href="/docs/reference/introspection/locate/" >Locate</a></li>
                
                
                <li><a href="/docs/reference/introspection/location/" >Location</a></li>
                
                
                <li><a href="/docs/reference/introspection/metadata/" >Metadata</a></li>
                
                
                <li><a href="/docs/reference/introspection/query/" >Query</a></li>
                
                
                <li><a href="/docs/reference/introspection/state/" >State</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/data-loading/" >数据加载</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/data-loading/cbor/" >CBOR</a></li>
                
                
                <li><a href="/docs/reference/data-loading/csv/" >CSV</a></li>
                
                
                <li><a href="/docs/reference/data-loading/json/" >JSON</a></li>
                
                
                <li><a href="/docs/reference/data-loading/read/" >Read</a></li>
                
                
                <li><a href="/docs/reference/data-loading/toml/" >TOML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/xml/" >XML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/yaml/" >YAML</a></li>
                
              </ul>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/guides/" >指南</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/guides/guide-for-latex-users/" >LaTeX 用户指南</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/page-setup/" >页面设置指南</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/packages/" >第三方包</a>
          
        </li>
        
        
        <li>
          <a href="/docs/changelog/" >更新日志</a>
          
        </li>
        
        
        <li>
          <a href="/docs/roadmap/" >路线图</a>
          
        </li>
        
        
        <li>
          <a href="/docs/community/" >社区</a>
          
        </li>
        
        
        <li>
          <a href="/docs/glossary/" >术语表</a>
          
        </li>
        
      </ul>

    </nav>
    <main>
      <ul class="breadcrumbs" aria-label="Breadcrumbs">
        <li class="root"><a href="/docs/"><img src="/assets/icons/16-docs-dark.svg" alt="Docs" width="16"
              height="16"></a></li>

        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/">参考</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/scripting/">脚本</a></li>
        
      </ul>

      

<h1>脚本</h1>
<p>Typst 内置了一个强大的脚本语言。可以使用代码自动生成文档，生成丰富多彩的样式。
下面是关于脚本语言的综述。</p>
<h2 id="expressions">表达式</h2>
<p>Typst 里面，标记和代码相互交融在一起。
除了最常用的文档元素，其他所有均是由 <em>函数</em> 生成。
为了尽可能的便利，Typst 设计了精巧的语法，用来将代码嵌入在标记中：用 <code>#</code>(井号) 来引入一个代码表达式，
表达式结束后，再恢复到正常的标记语法解析。
有些字符能够使其后字符继续解析为表达式，如果想将其解释为文本，可以用分号(<code>;</code>)来强制结束表达式解析。</p>
<div class="previewed-code"><pre><code><span class="typ-func">#</span><span class="typ-func">emph</span><span class="typ-punct">[</span>Hello<span class="typ-punct">]</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">emoji</span><span class="typ-punct">.</span><span class="typ-pol">face</span> <span class="typ-escape">\</span>
<span class="typ-str">#</span><span class="typ-str">&quot;hello&quot;</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/f225eedcb810ced31df3dfe3b3e7dda6.png" alt="Preview" width="480" height="190"/></div></div>
<p>上面示例展示了一些用到的表达式，
有<a href="/docs/reference/foundations/function/">函数调用</a>，
<a href="/docs/reference/scripting/#fields">字段访问</a>，
<a href="/docs/reference/scripting/#methods">方法调用</a>。
本章余下部分讲解更多类型表达式。
有几种表达式与井号语法不一致（比如二元运算表达式），
如果需要插入标记模式中，需要使用圆括号，比如 <code><span class="typ-punct">#</span><span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-op">+</span><span class="typ-num">2</span><span class="typ-punct">)</span></code>。</p>
<h2 id="blocks">块</h2>
<p>为了架构代码以及将标记嵌入代码中，Typst 设计了两种 <em>块</em>：</p>
<ul>
<li>
<p><strong>代码块：</strong> <code><span class="typ-punct">{</span> <span class="typ-key">let</span> x <span class="typ-op">=</span> <span class="typ-num">1</span><span class="typ-punct">;</span> x <span class="typ-op">+</span> <span class="typ-num">2</span> <span class="typ-punct">}</span></code> <br />
编写代码时，一个计算过程可能需要分解为多个语句，创建多个中间变量，等等。
可以将多个表达式组成一个代码块，就像一个表达式一样。在代码块中，多个表达式由换行符或者分号分割。
其中每个表达式的输出值被合并起来，作为代码块的值。
有些表达式没有有用的输出，比如 <code><span class="typ-key">let</span></code> 绑定返回 <code><span class="typ-key">none</span></code>，与其他值合并，没有任何效果。</p>
</li>
<li>
<p><strong>文档内容块</strong> <code><span class="typ-punct">[</span><span class="typ-strong">*Hey*</span> there!<span class="typ-punct">]</span></code> <br />
使用文档内容块，可以将标记/文档内容作为可编程值，存储到变量，传送给<a href="/docs/reference/foundations/function/">函数</a>。
文档内容块由方括号包裹，可以包含任何标记。
一个文档内容块产生一个 <a href="/docs/reference/foundations/content/">content 类型</a>的值。
文档内容块可以后缀参数形式任意多个传递给函数，就是说，<code><span class="typ-func">list</span><span class="typ-punct">[</span>A<span class="typ-punct">]</span><span class="typ-punct">[</span>B<span class="typ-punct">]</span></code> 等效于 <code><span class="typ-func">list</span><span class="typ-punct">(</span><span class="typ-punct">[</span>A<span class="typ-punct">]</span><span class="typ-punct">,</span> <span class="typ-punct">[</span>B<span class="typ-punct">]</span><span class="typ-punct">)</span></code>。</p>
</li>
</ul>
<p>文档内容块和代码块可以相互内嵌，下面示例中，<code><span class="typ-punct">[</span>hello<span class="typ-punct">]</span></code> 与 <code>a <span class="typ-op">+</span> <span class="typ-punct">[</span> the <span class="typ-punct">]</span> <span class="typ-op">+</span> b</code> 合并，生成 <code><span class="typ-punct">[</span>hello from the <span class="typ-strong">*world*</span><span class="typ-punct">]</span></code>。</p>
<div class="previewed-code"><pre><code><span class="typ-punct">#</span><span class="typ-punct">{</span>
  <span class="typ-key">let</span> a <span class="typ-op">=</span> <span class="typ-punct">[</span>from<span class="typ-punct">]</span>
  <span class="typ-key">let</span> b <span class="typ-op">=</span> <span class="typ-punct">[</span><span class="typ-strong">*world*</span><span class="typ-punct">]</span>
  <span class="typ-punct">[</span>hello <span class="typ-punct">]</span>
  a <span class="typ-op">+</span> <span class="typ-punct">[</span> the <span class="typ-punct">]</span> <span class="typ-op">+</span> b
<span class="typ-punct">}</span>
</code></pre><div class="preview"><img src="/assets/docs/7fb6c8bb26570187a3d8f3a560c32d60.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="bindings">绑定和解构</h2>
<p>上面已经展示，变量由 <code><span class="typ-key">let</span></code> 绑定定义。
= 符号后表达式的值被赋值给变量，这里赋值可以被省略，如果没有赋值，变量会初始化为 <code><span class="typ-key">none</span></code>。
<code><span class="typ-key">let</span></code> 关键词也可以用来生成一个<a href="/docs/reference/foundations/function//#definitions">自定义的有名函数</a>。
let 绑定的变量可以在接下来的块中或者文档中被访问。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> name <span class="typ-op">=</span> <span class="typ-str">&quot;Typst&quot;</span>
This is <span class="typ-pol">#</span><span class="typ-pol">name</span>&#39;s documentation.
It explains <span class="typ-pol">#</span><span class="typ-pol">name</span>.

<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-func">add</span><span class="typ-punct">(</span>x<span class="typ-punct">,</span> y<span class="typ-punct">)</span> <span class="typ-op">=</span> x <span class="typ-op">+</span> y
Sum is <span class="typ-func">#</span><span class="typ-func">add</span><span class="typ-punct">(</span><span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">3</span><span class="typ-punct">)</span>.
</code></pre><div class="preview"><img src="/assets/docs/06bda5b4dc5513a30aebfe2c273ada2a.png" alt="Preview" width="480" height="190"/></div></div>
<p>let 绑定也常用来解构<a href="/docs/reference/foundations/array/">数组</a>和<a href="/docs/reference/foundations/dictionary/">字典</a>，
解构时，等号左边的形式需要与数组或字典相似，
<code>..</code> 模式操作符只可被使用一次，用来指代数组或字典剩余的条目。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>x<span class="typ-punct">,</span> y<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">,</span> <span class="typ-num">2</span><span class="typ-punct">)</span>
The coordinates are <span class="typ-pol">#</span><span class="typ-pol">x</span>, <span class="typ-pol">#</span><span class="typ-pol">y</span>.

<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>a<span class="typ-punct">,</span> <span class="typ-op">..</span><span class="typ-punct">,</span> b<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">,</span> <span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">3</span><span class="typ-punct">,</span> <span class="typ-num">4</span><span class="typ-punct">)</span>
The first element is <span class="typ-pol">#</span><span class="typ-pol">a</span>.
The last element is <span class="typ-pol">#</span><span class="typ-pol">b</span>.

<span class="typ-key">#</span><span class="typ-key">let</span> books <span class="typ-op">=</span> <span class="typ-punct">(</span>
  Shakespeare<span class="typ-punct">:</span> <span class="typ-str">&quot;Hamlet&quot;</span><span class="typ-punct">,</span>
  Homer<span class="typ-punct">:</span> <span class="typ-str">&quot;The Odyssey&quot;</span><span class="typ-punct">,</span>
  Austen<span class="typ-punct">:</span> <span class="typ-str">&quot;Persuasion&quot;</span><span class="typ-punct">,</span>
<span class="typ-punct">)</span>

<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>Austen<span class="typ-punct">,</span><span class="typ-punct">)</span> <span class="typ-op">=</span> books
Austen wrote <span class="typ-pol">#</span><span class="typ-pol">Austen</span>.

<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>Homer<span class="typ-punct">:</span> h<span class="typ-punct">)</span> <span class="typ-op">=</span> books
Homer wrote <span class="typ-pol">#</span><span class="typ-pol">h</span>.

<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>Homer<span class="typ-punct">,</span> <span class="typ-op">..</span>other<span class="typ-punct">)</span> <span class="typ-op">=</span> books
<span class="typ-key">#</span><span class="typ-key">for</span> <span class="typ-punct">(</span>author<span class="typ-punct">,</span> title<span class="typ-punct">)</span> <span class="typ-key">in</span> other <span class="typ-punct">[</span>
  <span class="typ-pol">#</span><span class="typ-pol">author</span> wrote <span class="typ-pol">#</span><span class="typ-pol">title</span>.
<span class="typ-punct">]</span>
</code></pre><div class="preview"><img src="/assets/docs/e8d5f46bdffe454e3c436c807600b1cd.png" alt="Preview" width="480" height="190"/></div></div>
<p>在解构匹配模式中，可以使用 _ 下划线来丢弃一个元素。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-punct">(</span>_<span class="typ-punct">,</span> y<span class="typ-punct">,</span> _<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">,</span> <span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">3</span><span class="typ-punct">)</span>
The y coordinate is <span class="typ-pol">#</span><span class="typ-pol">y</span>.
</code></pre><div class="preview"><img src="/assets/docs/2e4ee4d0fbe81f88bae2db44bb024d07.png" alt="Preview" width="480" height="190"/></div></div>
<p>解构形式也可用于函数的参数列表中...</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> left <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">4</span><span class="typ-punct">,</span> <span class="typ-num">5</span><span class="typ-punct">)</span>
<span class="typ-key">#</span><span class="typ-key">let</span> right <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">3</span><span class="typ-punct">,</span> <span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">6</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">left</span><span class="typ-punct">.</span><span class="typ-func">zip</span><span class="typ-punct">(</span>right<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">map</span><span class="typ-punct">(</span>
  <span class="typ-punct">(</span><span class="typ-punct">(</span>a<span class="typ-punct">,</span>b<span class="typ-punct">)</span><span class="typ-punct">)</span> <span class="typ-op">=&gt;</span> a <span class="typ-op">+</span> b
<span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/6e18caba37cf9be991248e7d3aab314d.png" alt="Preview" width="480" height="190"/></div></div>
<p>... 和普通赋值的左半部分，这通常用于交换两个变量的值。</p>
<div class="previewed-code"><pre><code><span class="typ-punct">#</span><span class="typ-punct">{</span>
  <span class="typ-key">let</span> a <span class="typ-op">=</span> <span class="typ-num">1</span>
  <span class="typ-key">let</span> b <span class="typ-op">=</span> <span class="typ-num">2</span>
  <span class="typ-punct">(</span>a<span class="typ-punct">,</span> b<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-punct">(</span>b<span class="typ-punct">,</span> a<span class="typ-punct">)</span>
  <span class="typ-punct">[</span>a = <span class="typ-pol">#</span><span class="typ-pol">a</span>, b = <span class="typ-pol">#</span><span class="typ-pol">b</span><span class="typ-punct">]</span>
<span class="typ-punct">}</span>
</code></pre><div class="preview"><img src="/assets/docs/4aa3ec10ee748ed1116c7eae1e4df9e2.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="conditionals">条件控制</h2>
<p>使用条件控制语句，可以根据某种条件是否满足，来展示或计算不同的事情。
Typst 设计了 <code><span class="typ-key">if</span></code>, <code>else <span class="typ-key">if</span></code>, <code>else</code> 表达式。
当条件值为 <code><span class="typ-key">true</span></code> 时，条件语句会返回 if 从句的值，否则返回 else 从句的值。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">if</span> <span class="typ-num">1</span> <span class="typ-op">&lt;</span> <span class="typ-num">2</span> <span class="typ-punct">[</span>
  This is shown
<span class="typ-punct">]</span> <span class="typ-key">else</span> <span class="typ-punct">[</span>
  This is not.
<span class="typ-punct">]</span>
</code></pre><div class="preview"><img src="/assets/docs/e76379a33a676c5b7d921a6e96a07127.png" alt="Preview" width="480" height="190"/></div></div>
<p>每个分支从句可以写为语句块或者文档内容块。</p>
<ul>
<li><code><span class="typ-key">if</span> condition <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code></li>
<li><code><span class="typ-key">if</span> condition <span class="typ-punct">[</span>..<span class="typ-punct">]</span></code></li>
<li><code><span class="typ-key">if</span> condition <span class="typ-punct">[</span>..<span class="typ-punct">]</span> <span class="typ-key">else</span> <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code></li>
<li><code><span class="typ-key">if</span> condition <span class="typ-punct">[</span>..<span class="typ-punct">]</span> <span class="typ-key">else</span> <span class="typ-key">if</span> condition <span class="typ-punct">{</span>..<span class="typ-punct">}</span> <span class="typ-key">else</span> <span class="typ-punct">[</span>..<span class="typ-punct">]</span></code></li>
</ul>
<h2 id="loops">循环控制</h2>
<p>使用循环控制语句，可以反复的显示文档内容或者计算。
Typst 支持两种循环控制： <code><span class="typ-key">for</span></code> 循环和 <code><span class="typ-key">while</span></code> 循环。
<code><span class="typ-key">for</span></code> 循环用来遍历特定集合，<code><span class="typ-key">while</span></code> 循环根据某条件是否满足来决定是否再次迭代循环。
和块类似，循环结构 <em>合并</em> 每一次迭代循环的结果。</p>
<p>下面示例中，for 循环生成了三句话，然后将其合并成一个文档内容。
while 循环生成数个长度为1的数组，然后将其合并成一个大数组。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">for</span> c <span class="typ-key">in</span> <span class="typ-str">&quot;ABC&quot;</span> <span class="typ-punct">[</span>
  <span class="typ-pol">#</span><span class="typ-pol">c</span> is a letter.
<span class="typ-punct">]</span>

<span class="typ-key">#</span><span class="typ-key">let</span> n <span class="typ-op">=</span> <span class="typ-num">2</span>
<span class="typ-key">#</span><span class="typ-key">while</span> n <span class="typ-op">&lt;</span> <span class="typ-num">10</span> <span class="typ-punct">{</span>
  n <span class="typ-op">=</span> <span class="typ-punct">(</span>n <span class="typ-op">*</span> <span class="typ-num">2</span><span class="typ-punct">)</span> <span class="typ-op">-</span> <span class="typ-num">1</span>
  <span class="typ-punct">(</span>n<span class="typ-punct">,</span><span class="typ-punct">)</span>
<span class="typ-punct">}</span>
</code></pre><div class="preview"><img src="/assets/docs/339e68e646d2611ea2860b332106e017.png" alt="Preview" width="480" height="190"/></div></div>
<p>for 循环可以遍历多种集合：</p>
<ul>
<li>
<p><code><span class="typ-key">for</span> letter <span class="typ-key">in</span> <span class="typ-str">&quot;abc&quot;</span> <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code> <br />
遍历<a href="/docs/reference/foundations/str/">字符串</a>的每个字符。
（专业的说，是遍历字符串的每个形位符，大多时候，一个形位符对应一个字符/码位，
然而，有些表情标记符号由多个码位组成，但它仍然是一个形位符）。</p>
</li>
<li>
<p><code><span class="typ-key">for</span> value <span class="typ-key">in</span> array <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code> <br />
遍历<a href="/docs/reference/foundations/array/">数组</a>中的条目。<a href="/docs/reference/scripting/#bindings">let 绑定</a>中的解构语法也可使用于此。</p>
</li>
<li>
<p><code><span class="typ-key">for</span> pair <span class="typ-key">in</span> dict <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code> <br />
遍历<a href="/docs/reference/foundations/dictionary/">字典</a>的键值对。键值对也可以用 <code><span class="typ-key">for</span> <span class="typ-punct">(</span>key<span class="typ-punct">,</span> value<span class="typ-punct">)</span> <span class="typ-key">in</span> dict <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code> 语法解构。</p>
</li>
</ul>
<p>Typst 用 <code><span class="typ-key">break</span></code> 和 <code><span class="typ-key">continue</span></code> 语句来控制循环的执行，
<code><span class="typ-key">break</span></code> 用来跳出循环，<code><span class="typ-key">continue</span></code> 用来提前结束本次循环，然后执行下一次循环。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">for</span> letter <span class="typ-key">in</span> <span class="typ-str">&quot;abc nope&quot;</span> <span class="typ-punct">{</span>
  <span class="typ-key">if</span> letter <span class="typ-op">==</span> <span class="typ-str">&quot; &quot;</span> <span class="typ-punct">{</span>
    <span class="typ-key">break</span>
  <span class="typ-punct">}</span>

  letter
<span class="typ-punct">}</span>
</code></pre><div class="preview"><img src="/assets/docs/842d9007ec92471251bbf3dbd7553f36.png" alt="Preview" width="480" height="190"/></div></div>
<p>循环体可以是代码块，也可以是文档内容块：</p>
<ul>
<li><code><span class="typ-key">for</span> .. <span class="typ-key">in</span> collection <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code></li>
<li><code><span class="typ-key">for</span> .. <span class="typ-key">in</span> collection <span class="typ-punct">[</span>..<span class="typ-punct">]</span></code></li>
<li><code><span class="typ-key">while</span> condition <span class="typ-punct">{</span>..<span class="typ-punct">}</span></code></li>
<li><code><span class="typ-key">while</span> condition <span class="typ-punct">[</span>..<span class="typ-punct">]</span></code></li>
</ul>
<h2 id="fields">字段</h2>
<p>可以使用 <em>点号</em> 来访问一个值的字段，这个值可以是：</p>
<ul>
<li>有特定键的<a href="/docs/reference/foundations/dictionary/">字典</a>，</li>
<li>有变体的<a href="/docs/reference/symbols/symbol/">符号</a>，</li>
<li>有定义的<a href="/docs/reference/foundations/module/">模块</a>，</li>
<li>有特定字段的<a href="/docs/reference/foundations/content/">文档元素</a>，可访问的字段与文档元素的<a href="/docs/reference/foundations/function//#element-functions">构造函数</a>参数相匹配。</li>
</ul>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> dict <span class="typ-op">=</span> <span class="typ-punct">(</span>greet<span class="typ-punct">:</span> <span class="typ-str">&quot;Hello&quot;</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">dict</span><span class="typ-punct">.</span><span class="typ-pol">greet</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">emoji</span><span class="typ-punct">.</span><span class="typ-pol">face</span>

<span class="typ-key">#</span><span class="typ-key">let</span> it <span class="typ-op">=</span> <span class="typ-punct">[</span><span class="typ-heading">= Heading</span><span class="typ-punct">]</span>
<span class="typ-pol">#</span><span class="typ-pol">it</span><span class="typ-punct">.</span><span class="typ-pol">body</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">it</span><span class="typ-punct">.</span><span class="typ-pol">level</span>
</code></pre><div class="preview"><img src="/assets/docs/87635702d6b82c1ab68e582567398392.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="methods">Methods</h2>
<p>A <em>method call</em> is a convenient way to call a function that is scoped to a
value's <a href="/docs/reference/foundations/type/">type</a>. For example, we can call the <a href="/docs/reference/foundations/str/#definitions-len"><code>str.len</code></a>
function in the following two equivalent ways:</p>
<div class="previewed-code"><pre><code><span class="typ-pol">#</span><span class="typ-pol">str</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-str">&quot;abc&quot;</span><span class="typ-punct">)</span> is the same as
<span class="typ-str">#</span><span class="typ-str">&quot;abc&quot;</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/68a97a415ea8fd416893c9f6da91d031.png" alt="Preview" width="480" height="190"/></div></div>
<p>The structure of a method call is <code>value<span class="typ-punct">.</span><span class="typ-func">method</span><span class="typ-punct">(</span><span class="typ-op">..</span>args<span class="typ-punct">)</span></code> and its equivalent
full function call is <code><span class="typ-func">type</span><span class="typ-punct">(</span>value<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">method</span><span class="typ-punct">(</span>value<span class="typ-punct">,</span> <span class="typ-op">..</span>args<span class="typ-punct">)</span></code>. The documentation
of each type lists it's scoped functions. You cannot currently define your own
methods.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> array <span class="typ-op">=</span> <span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">,</span> <span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">3</span><span class="typ-punct">,</span> <span class="typ-num">4</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">array</span><span class="typ-punct">.</span><span class="typ-func">pop</span><span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">array</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-escape">\</span>

<span class="typ-punct">#</span><span class="typ-punct">(</span><span class="typ-str">&quot;a, b, c&quot;</span>
    <span class="typ-punct">.</span><span class="typ-func">split</span><span class="typ-punct">(</span><span class="typ-str">&quot;, &quot;</span><span class="typ-punct">)</span>
    <span class="typ-punct">.</span><span class="typ-func">join</span><span class="typ-punct">[</span> <span class="typ-escape">---</span> <span class="typ-punct">]</span><span class="typ-punct">)</span>

<span class="typ-str">#</span><span class="typ-str">&quot;abc&quot;</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-punct">)</span> is the same as
<span class="typ-pol">#</span><span class="typ-pol">str</span><span class="typ-punct">.</span><span class="typ-func">len</span><span class="typ-punct">(</span><span class="typ-str">&quot;abc&quot;</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/19fb3dfca4e9a8903455b87821619bc8.png" alt="Preview" width="480" height="190"/></div></div>
<p>There are a few special functions that modify the value they are called on (e.g.
<a href="/docs/reference/foundations/array/#definitions-push"><code>array.push</code></a>). These functions <em>must</em> be called in method form.
In some cases, when the method is only called for its side effect, its return
value should be ignored (and not participate in joining). The canonical way to
discard a value is with a let binding: <code><span class="typ-key">let</span> _ <span class="typ-op">=</span> array<span class="typ-punct">.</span><span class="typ-func">remove</span><span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">)</span></code>.</p>
<h2 id="modules">模块</h2>
<p>一个 Typst 工程项目可以拆解为多个 <em>模块</em> 文件。
一个模块可以使用多种方式引用其他模块的文档内容和定义。</p>
<ul>
<li>
<p><strong>插入：</strong> <code><span class="typ-key">include</span> <span class="typ-str">&quot;bar.typ&quot;</span></code> <br />
计算 <code>bar.typ</code> 路径文件，返回其<a href="/docs/reference/foundations/content/">文档内容</a>结果。</p>
</li>
<li>
<p><strong>导入：</strong> <code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span></code> <br />
在路径 <code>bar.typ</code> 处加载文档并插入结果
<a href="/docs/reference/foundations/module/">模块</a> 作为 <code>bar</code> 进入当前范围（不带后缀拓展名的文档名）。您可以使用 <code>as</code> 关键字重命名导入的模块：
<code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span> <span class="typ-key">as</span> baz</code></p>
</li>
<li>
<p><strong>Import items:</strong> <code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span><span class="typ-punct">:</span> a<span class="typ-punct">,</span> b</code> <br />
Evaluates the file at the path <code>bar.typ</code>, extracts the values of the variables
<code>a</code> and <code>b</code> (that need to be defined in <code>bar.typ</code>, e.g. through <code><span class="typ-key">let</span></code>
bindings) and defines them in the current file. Replacing <code>a, b</code> with <code>*</code>
loads all variables defined in a module. You can use the <code>as</code> keyword to
rename the individual items: <code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span><span class="typ-punct">:</span> a <span class="typ-key">as</span> one<span class="typ-punct">,</span> b <span class="typ-key">as</span> two</code></p>
</li>
<li>
<p><strong>导入项目:</strong> <code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span><span class="typ-punct">:</span> a<span class="typ-punct">,</span> b</code> <br />
加载路径为 <code>bar.typ</code> 的文档，提取变量
<code>a</code> 和 <code>b</code> (需要在 <code>bar.typ</code> 中定义，例如通过 <code><span class="typ-key">let</span></code>
绑定) 的值，并在当前文档中定义它们。将 <code>a, b</code> 替换为 <code>*</code>
可以加载模块中定义的所有变量。您可以使用 <code>as</code> 关键字来
重命名各个项目: <code><span class="typ-key">import</span> <span class="typ-str">&quot;bar.typ&quot;</span><span class="typ-punct">:</span> a <span class="typ-key">as</span> one<span class="typ-punct">,</span> b <span class="typ-key">as</span> two</code></p>
</li>
</ul>
<p>除了使用路径，也可以使用 <a href="/docs/reference/foundations/module/">模块值</a>，如下面示例：</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">import</span> emoji<span class="typ-punct">:</span> face
<span class="typ-pol">#</span><span class="typ-pol">face</span><span class="typ-punct">.</span><span class="typ-pol">grin</span>
</code></pre><div class="preview"><img src="/assets/docs/43014000497d459ced7b19ec99fd35ae.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="packages">包</h2>
<p>可以创建并导入 Typst <em>包</em>，在多个工程项目中进行复用。
一个包的导入需有三部分指定：包命名空间，包名称，包版本号。</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">import</span> <span class="typ-str">&quot;@preview/example:0.1.0&quot;</span><span class="typ-punct">:</span> add
<span class="typ-func">#</span><span class="typ-func">add</span><span class="typ-punct">(</span><span class="typ-num">2</span><span class="typ-punct">,</span> <span class="typ-num">7</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/5611b1fc00245c60ed0fd4942d77dcf9.png" alt="Preview" width="480" height="190"/></div></div>
<p><code>preview</code> 包命名空间包含了 Typst 社区分享的包。可以在 <a href="/docs/packages/">package</a> 章节搜索可用的社区分享包。</p>
<p>在本地使用 Typst 时，可以创建本地包。更多详情参考 <a href="https://github.com/typst/packages">包仓库</a>。</p>
<h2 id="operators">操作符</h2>
<p>下表类出了所有一元和二元操作符的作用、参数数量(一元、二元)和优先级（优先级越高，越优先执行)</p>
<table><thead><tr><th style="text-align: center">操作符</th><th>作用说明</th><th style="text-align: center">参数数量</th><th style="text-align: center">优先级</th></tr></thead><tbody>
<tr><td style="text-align: center"><code><span class="typ-op">-</span></code></td><td>负号</td><td style="text-align: center">一元</td><td style="text-align: center">7</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">+</span></code></td><td>正号，无作用，仅仅为了对称性</td><td style="text-align: center">一元</td><td style="text-align: center">7</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">*</span></code></td><td>乘号</td><td style="text-align: center">二元</td><td style="text-align: center">6</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">/</span></code></td><td>除号</td><td style="text-align: center">二元</td><td style="text-align: center">6</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">+</span></code></td><td>加号</td><td style="text-align: center">二元</td><td style="text-align: center">5</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">-</span></code></td><td>减号</td><td style="text-align: center">二元</td><td style="text-align: center">5</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">==</span></code></td><td>等号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">!=</span></code></td><td>不等于号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">&lt;</span></code></td><td>小于号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">&lt;=</span></code></td><td>小于等于号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">&gt;</span></code></td><td>大于号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">&gt;=</span></code></td><td>大于等于号</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-key">in</span></code></td><td>属于</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-key">not</span> <span class="typ-key">in</span></code></td><td>不属于</td><td style="text-align: center">二元</td><td style="text-align: center">4</td></tr>
<tr><td style="text-align: center"><code><span class="typ-key">not</span></code></td><td>逻辑非</td><td style="text-align: center">一元</td><td style="text-align: center">3</td></tr>
<tr><td style="text-align: center"><code><span class="typ-key">and</span></code></td><td>短路式逻辑并</td><td style="text-align: center">二元</td><td style="text-align: center">3</td></tr>
<tr><td style="text-align: center"><code><span class="typ-key">or</span></code></td><td>短路式逻辑或</td><td style="text-align: center">二元</td><td style="text-align: center">2</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">=</span></code></td><td>赋值</td><td style="text-align: center">二元</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">+=</span></code></td><td>相加赋值</td><td style="text-align: center">二元</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">-=</span></code></td><td>相减赋值</td><td style="text-align: center">二元</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">*=</span></code></td><td>相乘赋值</td><td style="text-align: center">二元</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: center"><code><span class="typ-op">/=</span></code></td><td>相除赋值</td><td style="text-align: center">二元</td><td style="text-align: center">1</td></tr>
</tbody></table>



      
      <div class="page-end-buttons"><a href="/docs/reference/styling/" class="previous"><img
            src="/assets/icons/16-arrow-right.svg" alt="←">
          <div><span class="page-title">样式</span><span class="hint">上一页</span></div>
        </a><a href="/docs/reference/foundations/" class="next"><img src="/assets/icons/16-arrow-right.svg" alt="→">
          <div><span class="page-title">基础</span><span class="hint">下一页</span></div>
        </a></div>
      
    </main>

    
    <nav id="page-overview"><strong>目录</strong>
      <ul>
        
        <li data-assoc="expressions"><a href="#expressions">Expressions</a>
          <ul></ul>
        </li>
        
        <li data-assoc="blocks"><a href="#blocks">Blocks</a>
          <ul></ul>
        </li>
        
        <li data-assoc="bindings"><a href="#bindings">Bindings</a>
          <ul></ul>
        </li>
        
        <li data-assoc="conditionals"><a href="#conditionals">Conditionals</a>
          <ul></ul>
        </li>
        
        <li data-assoc="loops"><a href="#loops">Loops</a>
          <ul></ul>
        </li>
        
        <li data-assoc="fields"><a href="#fields">Fields</a>
          <ul></ul>
        </li>
        
        <li data-assoc="methods"><a href="#methods">Methods</a>
          <ul></ul>
        </li>
        
        <li data-assoc="modules"><a href="#modules">Modules</a>
          <ul></ul>
        </li>
        
        <li data-assoc="packages"><a href="#packages">Packages</a>
          <ul></ul>
        </li>
        
        <li data-assoc="operators"><a href="#operators">Operators</a>
          <ul></ul>
        </li>
        
      </ul>
    </nav>
    
  </div>
  <footer>
    <div>
      <ul>
        <li><a href="https://typst.app/">主页</a></li>
        <li><a href="/docs/">中文文档</a></li>
        <li><a href="https://typst.app/about/">关于我们</a></li>
        <li><a href="https://typst.app/contact/">联系</a></li>
        <li><a href="https://typst.app/privacy/">隐私</a></li>
        <li><a href="https://typst.app/terms/">服务条款</a></li>
        <li><a href="https://typst.app/legal/">法律说明</a></li>
      </ul>
    </div>
    <div>
      <ul>
        <li><a href="https://typst.app/blog/">博客</a></li>
        <li><a href="https://twitter.com/typstapp/">Twitter</a></li>
        <li><a href="https://discord.gg/2uDybryKPe">Discord</a></li>
        <li><a href="https://www.linkedin.com/company/typst/">LinkedIn</a></li>
        <li><a href="https://instagram.com/typstapp/">Instagram</a></li>
        <li><a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io">GitHub</a></li>
      </ul>
    </div>
    <div>
      <p>Made in Berlin</p>
    </div>
  </footer>
  <script src="/scripts/fuse.basic.min.js"></script>
  <script src="/scripts/docs.js?bust=20230913"></script>
  <script src="/scripts/analytics.js" defer></script>
</body>

</html>