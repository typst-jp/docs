



<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Counter – Typst 中文文档</title>
  <meta name="description" content="Counter 类型的文档">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#239dad">
  <meta property="og:url" content="https://typst-doc-cn.github.io/docs/reference/introspection/counter/">
  <meta property="og:title" content="Counter – Typst 中文文档">
  <meta property="og:site_name" content="Typst">
  <meta property="og:description" content="Counter 类型的文档">
  <meta property="og:type">
  <meta property="og:image" content="https://typst-doc-cn.github.io/assets/social.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:site" content="@typstapp">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://typst-doc-cn.github.io/docs/reference/introspection/counter/">
  <meta name="twitter:image:alt"
    content="The left side of a text editor with colorful cursors, as well as the text &#x27;Compose papers faster, Typst&#x27;">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico">
  <!-- <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico"> -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#239dad">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="stylesheet" href="/styles/default.css?bust=20230913?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs.css?bust=20230915?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs-cn.css">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Regular.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Bold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-SemiBold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/CascadiaMono-Regular-Sub.woff2" as="font">
  <link rel="preload" href="/assets/images/blur.webp" as="image">
  
  <script>document.documentElement.className = document.documentElement.className.replace("no-js", "js"), document.addEventListener("DOMContentLoaded", (() => { const e = document.cookie.split("; ").find((e => e.startsWith("INSECURE_SIGNED_IN=")))?.split("=")[1].toLowerCase(); if ("1" === e || "true" === e || "yes" === e) { document.documentElement.classList.add("signed-in"); const e = document.querySelector("header nav a.nav-btn"), t = document.querySelector("header nav a.sign-in"); e && (e.innerHTML = "Go to app", e.setAttribute("href", "/app/")), t && (t.innerHTML = "Sign out", t.setAttribute("href", "https://api.typst.app/v1/auth/logout")) } }))</script>
</head>

<body class="no-js docs has-outline">
  <div class="alert">
    <div class="alert-content">
      <span><b>注意：</b>该中文文档为社区驱动的非官网文档，可能存在错译、漏译或过时等问题，请以官网文档 <a href="https://typst.app/docs/">Documentation</a>
        为准，如发现错漏，也欢迎 <a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io">您的贡献</a>（<a href="https://gitee.com/orangex4/typst-doc-cn.github.io">镜像</a>）。Typst 非官方中文交流 QQ 群：793548390</span>
      <br />
      <span><b>Warning:</b> the Chinese document is a community-driven non-official document, there may be mistranslation, omission or outdated problems, please refer to <a href="https://typst.app/docs/">the official website documentation</a>.</span>
    </div>
  </div>
  <header class="boring">
    <div><a href="/docs" class="logo-box"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label">
          <title id="logo-label">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>中文文档</span></a><button class="hamburger"><img alt="Open navigation"
          src="/assets/icons/16-hamburger-dark.svg" width="16" height="16"></button>
      <nav>
        <ul>
          <li class="social"><a href="https://twitter.com/typstapp/"><svg width="16" height="16" role="img"
                aria-labelledby="svg-twitter-label">
                <title id="svg-twitter-label">Twitter</title>
                <use href="/assets/icons/social.svg#twitter"></use>
              </svg></a></li>
          <li class="social"><a href="https://discord.gg/2uDybryKPe"><svg width="16" height="16" role="img"
                aria-labelledby="svg-discord-label">
                <title id="svg-discord-label">Discord</title>
                <use href="/assets/icons/social.svg#discord"></use>
              </svg></a></li>
          <li class="social"><a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io"><svg width="16" height="16" role="img"
                aria-labelledby="svg-github-label">
                <title id="svg-github-label">GitHub</title>
                <use href="/assets/icons/social.svg#github"></use>
              </svg></a></li>
          <li class="social"><a href="https://www.linkedin.com/company/typst/"><svg width="16" height="16" role="img"
                aria-labelledby="svg-linkedin-label">
                <title id="svg-linkedin-label">LinkedIn</title>
                <use href="/assets/icons/social.svg#linkedin"></use>
              </svg></a></li>
          <li class="secondary"><a href="https://typst.app/">主页</a></li>
          <!-- <li class="secondary"><a href="/signin/" class="sign-in">Sign in</a></li>
          <li><a href="/signup" id="header-btn" class="nav-btn btn">Sign up</a></li> -->
        </ul>
      </nav>
    </div>
  </header>
  <div class="main-grid">
    <nav class="folding"><a href="/docs" class="title-row"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label-nav">
          <title id="logo-label-nav">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>中文文档</span></a>
      <button class="close"><img alt="Close" src="/assets/icons/16-close-dark.svg"
          width="16" height="16"></button>
      <div class="search"><img src="/assets/icons/16-search-gray.svg" alt="Search" width="16" height="16"><input
          type="search" placeholder="搜索" id="docs-search"></div>
      <ul class="search-results hidden" id="search-results"></ul>
      <ul>
        
        
        <li>
          <a href="/docs/" >概览</a>
          
        </li>
        
        
        <li>
          <a href="/docs/tutorial/" >教程</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/tutorial/writing-in-typst/" >使用 Typst 写作</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/formatting/" >格式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/advanced-styling/" >高级样式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/making-a-template/" >制作模板</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/chinese/" >中文用户指南</a>
          
        </li>
        
        
        <li>
          <a href="/docs/reference/" >参考</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            
            <li class="category">Language</li>
            
            <li>
              <a href="/docs/reference/syntax/" >语法</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/styling/" >样式</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/scripting/" >脚本</a>
              
            </li>
            
            
            
            
            <li>
              <a href="/docs/reference/types/" >类型（旧）</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/types/none/" >None</a></li>
                
                
                <li><a href="/docs/reference/types/auto/" >Auto</a></li>
                
                
                <li><a href="/docs/reference/types/boolean/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/types/integer/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/types/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/types/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/types/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/types/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/types/relative-length/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/types/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/types/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/types/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/types/symbol/" >Symbol</a></li>
                
                
                <li><a href="/docs/reference/types/string/" >String</a></li>
                
                
                <li><a href="/docs/reference/types/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/types/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/types/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/types/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/types/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/types/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/types/module/" >Module</a></li>
                
              </ul>
              
            </li>

            
            <li class="category">Library</li>
            
            <li>
              <a href="/docs/reference/foundations/" >基础</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/foundations/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/foundations/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/foundations/assert/" >Assert</a></li>
                
                
                <li><a href="/docs/reference/foundations/bool/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/foundations/bytes/" >Bytes</a></li>
                
                
                <li><a href="/docs/reference/foundations/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/foundations/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/foundations/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/foundations/duration/" >Duration</a></li>
                
                
                <li><a href="/docs/reference/foundations/eval/" >Evaluate</a></li>
                
                
                <li><a href="/docs/reference/foundations/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/foundations/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/foundations/int/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/foundations/label/" >Label</a></li>
                
                
                <li><a href="/docs/reference/foundations/module/" >Module</a></li>
                
                
                <li><a href="/docs/reference/foundations/panic/" >Panic</a></li>
                
                
                <li><a href="/docs/reference/foundations/plugin/" >Plugin</a></li>
                
                
                <li><a href="/docs/reference/foundations/regex/" >Regex</a></li>
                
                
                <li><a href="/docs/reference/foundations/repr/" >Representation</a></li>
                
                
                <li><a href="/docs/reference/foundations/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/foundations/str/" >String</a></li>
                
                
                <li><a href="/docs/reference/foundations/style/" >Style</a></li>
                
                
                <li><a href="/docs/reference/foundations/type/" >Type</a></li>
                
                
                <li><a href="/docs/reference/foundations/version/" >Version</a></li>
                
                
                <li><a href="/docs/reference/foundations/sys" >System</a></li>
                
                
                <li><a href="/docs/reference/foundations/calc" >Calculation</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/model/" >模型</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/model/bibliography/" >参考文献</a></li>
                
                
                <li><a href="/docs/reference/model/list/" >Bullet List</a></li>
                
                
                <li><a href="/docs/reference/model/cite/" >引用</a></li>
                
                
                <li><a href="/docs/reference/model/document/" >文档</a></li>
                
                
                <li><a href="/docs/reference/model/emph/" >强调（斜体）</a></li>
                
                
                <li><a href="/docs/reference/model/figure/" >图表</a></li>
                
                
                <li><a href="/docs/reference/model/footnote/" >脚注</a></li>
                
                
                <li><a href="/docs/reference/model/heading/" >Heading</a></li>
                
                
                <li><a href="/docs/reference/model/link/" >Link</a></li>
                
                
                <li><a href="/docs/reference/model/enum/" >有序列表</a></li>
                
                
                <li><a href="/docs/reference/model/numbering/" >Numbering</a></li>
                
                
                <li><a href="/docs/reference/model/outline/" >Outline</a></li>
                
                
                <li><a href="/docs/reference/model/par/" >Paragraph</a></li>
                
                
                <li><a href="/docs/reference/model/parbreak/" >Paragraph Break</a></li>
                
                
                <li><a href="/docs/reference/model/quote/" >Quote</a></li>
                
                
                <li><a href="/docs/reference/model/ref/" >Reference</a></li>
                
                
                <li><a href="/docs/reference/model/strong/" >着重强调（加粗）</a></li>
                
                
                <li><a href="/docs/reference/model/table/" >Table</a></li>
                
                
                <li><a href="/docs/reference/model/terms/" >Term List</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/text/" >文本</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/text/highlight/" >文本高亮</a></li>
                
                
                <li><a href="/docs/reference/text/linebreak/" >换行</a></li>
                
                
                <li><a href="/docs/reference/text/lorem/" >假文</a></li>
                
                
                <li><a href="/docs/reference/text/lower/" >转小写</a></li>
                
                
                <li><a href="/docs/reference/text/overline/" >上划线</a></li>
                
                
                <li><a href="/docs/reference/text/raw/" >原始文本/代码块</a></li>
                
                
                <li><a href="/docs/reference/text/smallcaps/" >显示为小写</a></li>
                
                
                <li><a href="/docs/reference/text/smartquote/" >智能引号</a></li>
                
                
                <li><a href="/docs/reference/text/strike/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/text/sub/" >下标</a></li>
                
                
                <li><a href="/docs/reference/text/super/" >上标</a></li>
                
                
                <li><a href="/docs/reference/text/text/" >文本</a></li>
                
                
                <li><a href="/docs/reference/text/underline/" >下划线</a></li>
                
                
                <li><a href="/docs/reference/text/upper/" >转大写</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/math/" >数学</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/math/accent/" >重音符号</a></li>
                
                
                <li><a href="/docs/reference/math/cancel/" >删除线</a></li>
                
                
                <li><a href="/docs/reference/math/cases/" >左大括号</a></li>
                
                
                <li><a href="/docs/reference/math/class/" >类</a></li>
                
                
                <li><a href="/docs/reference/math/equation/" >数学表达式</a></li>
                
                
                <li><a href="/docs/reference/math/frac/" >分数</a></li>
                
                
                <li><a href="/docs/reference/math/mat/" >矩阵</a></li>
                
                
                <li><a href="/docs/reference/math/op/" >文本运算符</a></li>
                
                
                <li><a href="/docs/reference/math/vec/" >向量</a></li>
                
                
                <li><a href="/docs/reference/math/underover" >上/下方内容</a></li>
                
                
                <li><a href="/docs/reference/math/variants" >字体变体</a></li>
                
                
                <li><a href="/docs/reference/math/sizes" >显示尺寸</a></li>
                
                
                <li><a href="/docs/reference/math/lr" >Left/Right</a></li>
                
                
                <li><a href="/docs/reference/math/styles" >显示样式</a></li>
                
                
                <li><a href="/docs/reference/math/roots" >根式</a></li>
                
                
                <li><a href="/docs/reference/math/attach" >附缀</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/symbols/" >符号</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/symbols/sym/" >通用</a></li>
                
                
                <li><a href="/docs/reference/symbols/emoji/" >表情符号</a></li>
                
                
                <li><a href="/docs/reference/symbols/symbol/" >符号</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/layout/" >布局</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/layout/align/" >Align</a></li>
                
                
                <li><a href="/docs/reference/layout/alignment/" >Alignment</a></li>
                
                
                <li><a href="/docs/reference/layout/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/layout/block/" >Block</a></li>
                
                
                <li><a href="/docs/reference/layout/box/" >Box</a></li>
                
                
                <li><a href="/docs/reference/layout/colbreak/" >Column Break</a></li>
                
                
                <li><a href="/docs/reference/layout/columns/" >Columns</a></li>
                
                
                <li><a href="/docs/reference/layout/direction/" >Direction</a></li>
                
                
                <li><a href="/docs/reference/layout/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/layout/grid/" >Grid</a></li>
                
                
                <li><a href="/docs/reference/layout/hide/" >Hide</a></li>
                
                
                <li><a href="/docs/reference/layout/layout/" >Layout</a></li>
                
                
                <li><a href="/docs/reference/layout/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/layout/measure/" >Measure</a></li>
                
                
                <li><a href="/docs/reference/layout/move/" >Move</a></li>
                
                
                <li><a href="/docs/reference/layout/pad/" >Padding</a></li>
                
                
                <li><a href="/docs/reference/layout/page/" >Page</a></li>
                
                
                <li><a href="/docs/reference/layout/pagebreak/" >Page Break</a></li>
                
                
                <li><a href="/docs/reference/layout/place/" >Place</a></li>
                
                
                <li><a href="/docs/reference/layout/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/layout/relative/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/layout/repeat/" >Repeat</a></li>
                
                
                <li><a href="/docs/reference/layout/rotate/" >Rotate</a></li>
                
                
                <li><a href="/docs/reference/layout/scale/" >Scale</a></li>
                
                
                <li><a href="/docs/reference/layout/h/" >Spacing (H)</a></li>
                
                
                <li><a href="/docs/reference/layout/v/" >Spacing (V)</a></li>
                
                
                <li><a href="/docs/reference/layout/stack/" >Stack</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/visualize/" >可视化</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/visualize/circle/" >Circle</a></li>
                
                
                <li><a href="/docs/reference/visualize/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/visualize/ellipse/" >Ellipse</a></li>
                
                
                <li><a href="/docs/reference/visualize/gradient/" >Gradient</a></li>
                
                
                <li><a href="/docs/reference/visualize/image/" >Image</a></li>
                
                
                <li><a href="/docs/reference/visualize/line/" >Line</a></li>
                
                
                <li><a href="/docs/reference/visualize/path/" >Path</a></li>
                
                
                <li><a href="/docs/reference/visualize/pattern/" >Pattern</a></li>
                
                
                <li><a href="/docs/reference/visualize/polygon/" >Polygon</a></li>
                
                
                <li><a href="/docs/reference/visualize/rect/" >Rectangle</a></li>
                
                
                <li><a href="/docs/reference/visualize/square/" >Square</a></li>
                
                
                <li><a href="/docs/reference/visualize/stroke/" >Stroke</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/introspection/" >内省</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/introspection/counter/"  aria-current="page" >Counter</a></li>
                
                
                <li><a href="/docs/reference/introspection/locate/" >Locate</a></li>
                
                
                <li><a href="/docs/reference/introspection/location/" >Location</a></li>
                
                
                <li><a href="/docs/reference/introspection/metadata/" >Metadata</a></li>
                
                
                <li><a href="/docs/reference/introspection/query/" >Query</a></li>
                
                
                <li><a href="/docs/reference/introspection/state/" >State</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/data-loading/" >数据加载</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/data-loading/cbor/" >CBOR</a></li>
                
                
                <li><a href="/docs/reference/data-loading/csv/" >CSV</a></li>
                
                
                <li><a href="/docs/reference/data-loading/json/" >JSON</a></li>
                
                
                <li><a href="/docs/reference/data-loading/read/" >Read</a></li>
                
                
                <li><a href="/docs/reference/data-loading/toml/" >TOML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/xml/" >XML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/yaml/" >YAML</a></li>
                
              </ul>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/guides/" >指南</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/guides/guide-for-latex-users/" >LaTeX 用户指南</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/page-setup/" >页面设置指南</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/packages/" >第三方包</a>
          
        </li>
        
        
        <li>
          <a href="/docs/changelog/" >更新日志</a>
          
        </li>
        
        
        <li>
          <a href="/docs/roadmap/" >路线图</a>
          
        </li>
        
        
        <li>
          <a href="/docs/community/" >社区</a>
          
        </li>
        
        
        <li>
          <a href="/docs/glossary/" >术语表</a>
          
        </li>
        
      </ul>

    </nav>
    <main>
      <ul class="breadcrumbs" aria-label="Breadcrumbs">
        <li class="root"><a href="/docs/"><img src="/assets/icons/16-docs-dark.svg" alt="Docs" width="16"
              height="16"></a></li>

        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/">参考</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/introspection/">内省</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/introspection/counter/">Counter</a></li>
        
      </ul>

      

<h1 id="summary"><span class="pill pill-obj">counter</span></h1>
<p>Counts through pages, elements, and more.</p>
<p>With the counter function, you can access and modify counters for pages,
headings, figures, and more. Moreover, you can define custom counters for
other things you want to count.</p>
<h2 id="displaying">Displaying a counter</h2>
<p>To display the current value of the heading counter, you call the <code>counter</code>
function with the <code>key</code> set to <code>heading</code> and then call the <code>display</code> method
on the counter. To see any output, you also have to enable heading
<a href="/docs/reference/model/heading/#parameters-numbering">numbering</a>.</p>
<p>The <code>display</code> method optionally takes an argument telling it how to format
the counter. This can be a <a href="/docs/reference/model/numbering/">numbering pattern or a function</a>.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">heading</span><span class="typ-punct">(</span>numbering<span class="typ-punct">:</span> <span class="typ-str">&quot;1.&quot;</span><span class="typ-punct">)</span>

<span class="typ-heading">= Introduction</span>
Some text here.

<span class="typ-heading">= Background</span>
The current value is:
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span>

Or in roman numerals:
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-str">&quot;I&quot;</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/3c91f06c6e12011f1262a3edaf9de993.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="modifying">Modifying a counter</h2>
<p>To modify a counter, you can use the <code>step</code> and <code>update</code> methods:</p>
<ul>
<li>
<p>The <code>step</code> method increases the value of the counter by one. Because
counters can have multiple levels (in the case of headings for sections,
subsections, and so on), the <code>step</code> method optionally takes a <code>level</code>
argument. If given, the counter steps at the given depth.</p>
</li>
<li>
<p>The <code>update</code> method allows you to arbitrarily modify the counter. In its
basic form, you give it an integer (or multiple for multiple levels). For
more flexibility, you can instead also give it a function that gets the
current value and returns a new value.</p>
</li>
</ul>
<p>The heading counter is stepped before the heading is displayed, so
<code>Analysis</code> gets the number seven even though the counter is at six after the
second update.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">heading</span><span class="typ-punct">(</span>numbering<span class="typ-punct">:</span> <span class="typ-str">&quot;1.&quot;</span><span class="typ-punct">)</span>

<span class="typ-heading">= Introduction</span>
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span>

<span class="typ-heading">= Background</span>
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">update</span><span class="typ-punct">(</span><span class="typ-num">3</span><span class="typ-punct">)</span>
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">update</span><span class="typ-punct">(</span>n <span class="typ-op">=&gt;</span> n <span class="typ-op">*</span> <span class="typ-num">2</span><span class="typ-punct">)</span>

<span class="typ-heading">= Analysis</span>
Let&#39;s skip 7.1.
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span>level<span class="typ-punct">:</span> <span class="typ-num">2</span><span class="typ-punct">)</span>

<span class="typ-heading">== Analysis</span>
Still at <span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>heading<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span>.
</code></pre><div class="preview"><img src="/assets/docs/dc3be507febcfa78e096b4d4eb924e01.png" alt="Preview" width="480" height="190"/></div></div>
<p>To define your own counter, call the <code>counter</code> function with a string as a
key. This key identifies the counter globally.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> mine <span class="typ-op">=</span> <span class="typ-func">counter</span><span class="typ-punct">(</span><span class="typ-str">&quot;mycounter&quot;</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-escape">\</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">update</span><span class="typ-punct">(</span>c <span class="typ-op">=&gt;</span> c <span class="typ-op">*</span> <span class="typ-num">3</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span> <span class="typ-escape">\</span>
</code></pre><div class="preview"><img src="/assets/docs/8d57dcf6f8381bff15ee2ff13bf8bc91.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="how-to-step">How to step</h2>
<p>When you define and use a custom counter, in general, you should first step
the counter and then display it. This way, the stepping behaviour of a
counter can depend on the element it is stepped for. If you were writing a
counter for, let's say, theorems, your theorem's definition would thus first
include the counter step and only then display the counter and the theorem's
contents.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> c <span class="typ-op">=</span> <span class="typ-func">counter</span><span class="typ-punct">(</span><span class="typ-str">&quot;theorem&quot;</span><span class="typ-punct">)</span>
<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-func">theorem</span><span class="typ-punct">(</span>it<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-func">block</span><span class="typ-punct">[</span>
  <span class="typ-pol">#</span><span class="typ-pol">c</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
  <span class="typ-strong">*Theorem <span class="typ-pol">#</span><span class="typ-pol">c</span><span class="typ-punct">.</span><span class="typ-func">display</span><span class="typ-punct">(</span><span class="typ-punct">)</span>:*</span> <span class="typ-pol">#</span><span class="typ-pol">it</span>
<span class="typ-punct">]</span>

<span class="typ-func">#</span><span class="typ-func">theorem</span><span class="typ-punct">[</span><span class="typ-math-delim">$</span>1 = 1<span class="typ-math-delim">$</span><span class="typ-punct">]</span>
<span class="typ-func">#</span><span class="typ-func">theorem</span><span class="typ-punct">[</span><span class="typ-math-delim">$</span>2 &lt; 3<span class="typ-math-delim">$</span><span class="typ-punct">]</span>
</code></pre><div class="preview"><img src="/assets/docs/b97977cf07ea730ac9e00f19761bd36c.png" alt="Preview" width="480" height="190"/></div></div>
<p>The rationale behind this is best explained on the example of the heading
counter: An update to the heading counter depends on the heading's level.
By stepping directly before the heading, we can correctly step from <code>1</code> to
<code>1.1</code> when encountering a level 2 heading. If we were to step after the
heading, we wouldn't know what to step to.</p>
<p>Because counters should always be stepped before the elements they count,
they always start at zero. This way, they are at one for the first display
(which happens after the first step).</p>
<h2 id="page-counter">Page counter</h2>
<p>The page counter is special. It is automatically stepped at each pagebreak.
But like other counters, you can also step it manually. For example, you
could have Roman page numbers for your preface, then switch to Arabic page
numbers for your main content and reset the page counter to one.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">page</span><span class="typ-punct">(</span>numbering<span class="typ-punct">:</span> <span class="typ-str">&quot;(i)&quot;</span><span class="typ-punct">)</span>

<span class="typ-heading">= Preface</span>
The preface is numbered with
roman numerals.

<span class="typ-key">#</span><span class="typ-key">set</span> <span class="typ-func">page</span><span class="typ-punct">(</span>numbering<span class="typ-punct">:</span> <span class="typ-str">&quot;1 / 1&quot;</span><span class="typ-punct">)</span>
<span class="typ-func">#</span><span class="typ-func">counter</span><span class="typ-punct">(</span>page<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">update</span><span class="typ-punct">(</span><span class="typ-num">1</span><span class="typ-punct">)</span>

<span class="typ-heading">= Main text</span>
Here, the counter is reset to one.
We also display both the current
page and total number of pages in
Arabic numbers.
</code></pre><div class="preview"><img src="/assets/docs/6e042ee9b3964a4ce84bb21b9ca876e8.png" alt="Preview" width="480" height="190"/></div></div>
<h2 id="time-travel">Time travel</h2>
<p>Counters can travel through time! You can find out the final value of the
counter before it is reached and even determine what the value was at any
particular location in the document.</p>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> mine <span class="typ-op">=</span> <span class="typ-func">counter</span><span class="typ-punct">(</span><span class="typ-str">&quot;mycounter&quot;</span><span class="typ-punct">)</span>

<span class="typ-heading">= Values</span>
<span class="typ-func">#</span><span class="typ-func">locate</span><span class="typ-punct">(</span>loc <span class="typ-op">=&gt;</span> <span class="typ-punct">{</span>
  <span class="typ-key">let</span> start-val <span class="typ-op">=</span> mine<span class="typ-punct">.</span><span class="typ-func">at</span><span class="typ-punct">(</span>loc<span class="typ-punct">)</span>
  <span class="typ-key">let</span> elements <span class="typ-op">=</span> <span class="typ-func">query</span><span class="typ-punct">(</span><span class="typ-label">&lt;intro&gt;</span><span class="typ-punct">,</span> loc<span class="typ-punct">)</span>
  <span class="typ-key">let</span> intro-val <span class="typ-op">=</span> mine<span class="typ-punct">.</span><span class="typ-func">at</span><span class="typ-punct">(</span>
    elements<span class="typ-punct">.</span><span class="typ-func">first</span><span class="typ-punct">(</span><span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">location</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
  <span class="typ-punct">)</span>
  <span class="typ-key">let</span> final-val <span class="typ-op">=</span> mine<span class="typ-punct">.</span><span class="typ-func">final</span><span class="typ-punct">(</span>loc<span class="typ-punct">)</span>
  <span class="typ-punct">[</span>Starts as: <span class="typ-pol">#</span><span class="typ-pol">start-val</span> <span class="typ-escape">\</span>
   Value at intro is: <span class="typ-pol">#</span><span class="typ-pol">intro-val</span> <span class="typ-escape">\</span>
   Final value is: <span class="typ-pol">#</span><span class="typ-pol">final-val</span> <span class="typ-escape">\</span> <span class="typ-punct">]</span>
<span class="typ-punct">}</span><span class="typ-punct">)</span>

<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">update</span><span class="typ-punct">(</span>n <span class="typ-op">=&gt;</span> n <span class="typ-op">+</span> <span class="typ-num">3</span><span class="typ-punct">)</span>

<span class="typ-heading">= Introduction</span> <span class="typ-label">&lt;intro&gt;</span>
<span class="typ-func">#</span><span class="typ-func">lorem</span><span class="typ-punct">(</span><span class="typ-num">10</span><span class="typ-punct">)</span>

<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">mine</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/2bb4fadda762ecd725b12fa5c261cb7a.png" alt="Preview" width="480" height="190"/></div></div>
<p>Let's dissect what happens in the example above:</p>
<ul>
<li>
<p>We call <a href="/docs/reference/introspection/locate/"><code>locate</code></a> to get access to the current location in the
document. We then pass this location to our counter's <code>at</code> method to get
its value at the current location. The <code>at</code> method always returns an array
because counters can have multiple levels. As the counter starts at zero,
the first value is thus <code><span class="typ-punct">(</span><span class="typ-num">0</span><span class="typ-punct">,</span><span class="typ-punct">)</span></code>.</p>
</li>
<li>
<p>We now <a href="/docs/reference/introspection/query/"><code>query</code></a> the document for all elements with the
<code><span class="typ-label">&lt;intro&gt;</span></code> label. The result is an array from which we extract the first
(and only) element's <a href="/docs/reference/foundations/content/#definitions-location">location</a>. We then look up the
value of the counter at that location. The first update to the counter
sets it to <code><span class="typ-num">0</span> <span class="typ-op">+</span> <span class="typ-num">3</span> <span class="typ-op">=</span> <span class="typ-num">3</span></code>. At the introduction heading, the value is thus
<code><span class="typ-punct">(</span><span class="typ-num">3</span><span class="typ-punct">,</span><span class="typ-punct">)</span></code>.</p>
</li>
<li>
<p>Last but not least, we call the <code>final</code> method on the counter. It tells us
what the counter's value will be at the end of the document. We also need
to give it a location to prove that we are inside of a <code>locate</code> call, but
which one doesn't matter. After the heading follow two calls to <code>step()</code>,
so the final value is <code><span class="typ-punct">(</span><span class="typ-num">5</span><span class="typ-punct">,</span><span class="typ-punct">)</span></code>.</p>
</li>
</ul>
<h2 id="other-state">Other kinds of state</h2>
<p>The <code>counter</code> type is closely related to <a href="/docs/reference/introspection/state/">state</a> type. Read its
documentation for more details on state management in Typst and why it
doesn't just use normal variables for counters.</p>


<h2 id="constructor">
  
<span aria-describedby="constructor-tooltip">构造函数</span>
<div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
    aria-labelledby="constructor-tooltip-qm-label">
    <title id="constructor-tooltip-qm-label">如果类型具有构造函数，可以像函数一样调用它来创建一个该类型的值。</title>
    <use href="/assets/icons/12-tooltip.svg#icon"></use>
  </svg>
  <div role="tooltip" id="constructor-tooltip" tabindex="-1">如果类型具有构造函数，可以像函数一样调用它来创建一个该类型的值。</div>
</div>

</h2>

<p>Create a new counter identified by a key.</p>

<div class="code code-definition single-arg"><span
    class="typ-func">counter</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/str" class="pill pill-str">str</a><a href="/docs/reference/types/label" class="pill pill-obj">label</a><a href="/docs/reference/types/selector" class="pill pill-obj">selector</a><a href="/docs/reference/types/function" class="pill pill-fn">function</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/counter" class="pill pill-obj">counter</a></div>





<h4 id="constructor-counter-parameters-key"><code>key</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/str" class="pill pill-str">str</a>
      
      <a href="/docs/reference/types/label" class="pill pill-obj">label</a>
      
      <a href="/docs/reference/types/selector" class="pill pill-obj">selector</a>
      
      <a href="/docs/reference/types/function" class="pill pill-fn">function</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="constructor-counter-parameters-key-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="constructor-counter-parameters-key-positional-tooltip-qm-label">
          <title id="constructor-counter-parameters-key-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="constructor-counter-parameters-key-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>The key that identifies this counter.</p>
<ul>
<li>If it is a string, creates a custom counter that is only affected
by manual updates,</li>
<li>If this is a <code><span class="typ-label">&lt;label&gt;</span></code>, counts through all elements with that
label,</li>
<li>If this is an element function or selector, counts through its
elements,</li>
<li>If this is the <a href="/docs/reference/layout/page/"><code>page</code></a> function, counts through pages.</li>
</ul>










<h2 id="definitions">
  
<span aria-describedby="definitions-tooltip">定义</span>
<div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
    aria-labelledby="definitions-tooltip-qm-label">
    <title id="definitions-tooltip-qm-label">函数和类型可以有与其关联的定义 (成员或方法)。可以使用 "." 操作符来访问调用它们。</title>
    <use href="/assets/icons/12-tooltip.svg#icon"></use>
  </svg>
  <div role="tooltip" id="definitions-tooltip" tabindex="-1">函数和类型可以有与其关联的定义 (成员或方法)。可以使用 "." 操作符来访问调用它们。</div>
</div>

</h2>


  <h3 id="-display" class="method-head"><span><code>display</code></span></h3>
  
<p>Displays the current value of the counter.</p>

<div class="code code-definition ">self.<span
    class="typ-func">display</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/none" class="pill pill-kw">none</a><a href="/docs/reference/types/str" class="pill pill-str">str</a><a href="/docs/reference/types/function" class="pill pill-fn">function</a>, </span><span
      class="overview-param"><a href="#parameters-both">both<!-- -->: </a><a href="/docs/reference/types/bool" class="pill pill-bool">bool</a>, </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/content" class="pill pill-con">content</a></div>





<h4 id="definitions-display-display-parameters-numbering"><code>numbering</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/none" class="pill pill-kw">none</a>
      
      <a href="/docs/reference/types/str" class="pill pill-str">str</a>
      
      <a href="/docs/reference/types/function" class="pill pill-fn">function</a>
      
    </div>
    <small><span
        aria-describedby="definitions-display-display-parameters-numbering-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-display-display-parameters-numbering-positional-tooltip-qm-label">
          <title id="definitions-display-display-parameters-numbering-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-display-display-parameters-numbering-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>A <a href="/docs/reference/model/numbering/">numbering pattern or a function</a>, which specifies how
to display the counter. If given a function, that function receives
each number of the counter as a separate argument. If the amount of
numbers varies, e.g. for the heading argument, you can use an
<a href="/docs/reference/foundations/arguments/">argument sink</a>.</p>
<p>If this is omitted, displays the counter with the numbering style
for the counted element or with the pattern <code><span class="typ-str">&quot;1.1&quot;</span></code> if no such
style exists.</p>


<p>默认：<code><span class="typ-key">none</span></code></p>



<h4 id="definitions-display-display-parameters-both"><code>both</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/bool" class="pill pill-bool">bool</a>
      
    </div>
    
  </div>
</h4>
<p>If enabled, displays the current and final top-level count together.
Both can be styled through a single numbering pattern. This is used
by the page numbering property to display the current and total
number of pages when a pattern like <code><span class="typ-str">&quot;1 / 1&quot;</span></code> is given.</p>


<p>默认：<code><span class="typ-key">false</span></code></p>






  <h3 id="-step" class="method-head"><span><code>step</code></span></h3>
  
<p>Increases the value of the counter by one.</p>
<p>The update will be in effect at the position where the returned content
is inserted into the document. If you don't put the output into the
document, nothing happens! This would be the case, for example, if you
write <code><span class="typ-key">let</span> _ <span class="typ-op">=</span> <span class="typ-func">counter</span><span class="typ-punct">(</span>page<span class="typ-punct">)</span><span class="typ-punct">.</span><span class="typ-func">step</span><span class="typ-punct">(</span><span class="typ-punct">)</span></code>. Counter updates are always
applied in layout order and in that case, Typst wouldn't know when to
step the counter.</p>

<div class="code code-definition single-arg">self.<span
    class="typ-func">step</span>(<div class="arguments"><span
      class="overview-param"><a href="#parameters-level">level<!-- -->: </a><a href="/docs/reference/types/int" class="pill pill-num">int</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/content" class="pill pill-con">content</a></div>





<h4 id="definitions-step-step-parameters-level"><code>level</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/int" class="pill pill-num">int</a>
      
    </div>
    
  </div>
</h4>
<p>The depth at which to step the counter. Defaults to <code><span class="typ-num">1</span></code>.</p>


<p>默认：<code><span class="typ-num">1</span></code></p>






  <h3 id="-update" class="method-head"><span><code>update</code></span></h3>
  
<p>Updates the value of the counter.</p>
<p>Just like with <code>step</code>, the update only occurs if you put the resulting
content into the document.</p>

<div class="code code-definition single-arg">self.<span
    class="typ-func">update</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/int" class="pill pill-num">int</a><a href="/docs/reference/types/array" class="pill pill-obj">array</a><a href="/docs/reference/types/function" class="pill pill-fn">function</a><a href="/docs/reference/types/counter-update" class="pill pill-obj">counter-update</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/content" class="pill pill-con">content</a></div>





<h4 id="definitions-update-update-parameters-update"><code>update</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/int" class="pill pill-num">int</a>
      
      <a href="/docs/reference/types/array" class="pill pill-obj">array</a>
      
      <a href="/docs/reference/types/function" class="pill pill-fn">function</a>
      
      <a href="/docs/reference/types/counter-update" class="pill pill-obj">counter-update</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="definitions-update-update-parameters-update-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-update-update-parameters-update-positional-tooltip-qm-label">
          <title id="definitions-update-update-parameters-update-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-update-update-parameters-update-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>If given an integer or array of integers, sets the counter to that
value. If given a function, that function receives the previous
counter value (with each number as a separate argument) and has to
return the new value (integer or array).</p>







  <h3 id="-at" class="method-head"><span><code>at</code></span></h3>
  
<p>Gets the value of the counter at the given location. Always returns an
array of integers, even if the counter has just one number.</p>

<div class="code code-definition single-arg">self.<span
    class="typ-func">at</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/location" class="pill pill-obj">location</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/int" class="pill pill-num">int</a><a href="/docs/reference/types/array" class="pill pill-obj">array</a></div>





<h4 id="definitions-at-at-parameters-location"><code>location</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/location" class="pill pill-obj">location</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="definitions-at-at-parameters-location-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-at-at-parameters-location-positional-tooltip-qm-label">
          <title id="definitions-at-at-parameters-location-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-at-at-parameters-location-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>The location at which the counter value should be retrieved. A
suitable location can be retrieved from <a href="/docs/reference/introspection/locate/"><code>locate</code></a> or
<a href="/docs/reference/introspection/query/"><code>query</code></a>.</p>







  <h3 id="-final" class="method-head"><span><code>final</code></span></h3>
  
<p>Gets the value of the counter at the end of the document. Always returns
an array of integers, even if the counter has just one number.</p>

<div class="code code-definition single-arg">self.<span
    class="typ-func">final</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/types/location" class="pill pill-obj">location</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/types/int" class="pill pill-num">int</a><a href="/docs/reference/types/array" class="pill pill-obj">array</a></div>





<h4 id="definitions-final-final-parameters-location"><code>location</code>
  <div class="additional-info">
    <div>
      
      <a href="/docs/reference/types/location" class="pill pill-obj">location</a>
      
    </div>
    <small>必需参数</small><small><span
        aria-describedby="definitions-final-final-parameters-location-positional-tooltip">位置参数</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-final-final-parameters-location-positional-tooltip-qm-label">
          <title id="definitions-final-final-parameters-location-positional-tooltip-qm-label">
            位置参数按顺序传入，不带名称。</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-final-final-parameters-location-positional-tooltip"
          tabindex="-1">位置参数按顺序传入，不带名称。</div>
      </div>
    </small>
  </div>
</h4>
<p>Can be an arbitrary location, as its value is irrelevant for the
method's return value. Why is it required then? Typst has to
evaluate parts of your code multiple times to determine all counter
values. By only allowing this method within <a href="/docs/reference/introspection/locate/"><code>locate</code></a>
calls, the amount of code that can depend on the method's result is
reduced. If you could call <code>final</code> directly at the top level of a
module, the evaluation of the whole module and its exports could
depend on the counter's value.</p>










      
      <div class="page-end-buttons"><a href="/docs/reference/introspection/" class="previous"><img
            src="/assets/icons/16-arrow-right.svg" alt="←">
          <div><span class="page-title">内省</span><span class="hint">上一页</span></div>
        </a><a href="/docs/reference/introspection/locate/" class="next"><img src="/assets/icons/16-arrow-right.svg" alt="→">
          <div><span class="page-title">Locate</span><span class="hint">下一页</span></div>
        </a></div>
      
    </main>

    
    <nav id="page-overview"><strong>目录</strong>
      <ul>
        
        <li data-assoc="summary"><a href="#summary">Summary</a>
          <ul></ul>
        </li>
        
        <li data-assoc="displaying"><a href="#displaying">Displaying</a>
          <ul></ul>
        </li>
        
        <li data-assoc="modifying"><a href="#modifying">Modifying</a>
          <ul></ul>
        </li>
        
        <li data-assoc="how-to-step"><a href="#how-to-step">How To Step</a>
          <ul></ul>
        </li>
        
        <li data-assoc="page-counter"><a href="#page-counter">Page Counter</a>
          <ul></ul>
        </li>
        
        <li data-assoc="time-travel"><a href="#time-travel">Time Travel</a>
          <ul></ul>
        </li>
        
        <li data-assoc="other-state"><a href="#other-state">Other State</a>
          <ul></ul>
        </li>
        
        <li data-assoc="constructor"><a href="#constructor">Constructor</a>
          <ul></ul>
        </li>
        
        <li data-assoc="definitions"><a href="#definitions">Definitions</a>
          <ul></ul>
        </li>
        
      </ul>
    </nav>
    
  </div>
  <footer>
    <div>
      <ul>
        <li><a href="https://typst.app/">主页</a></li>
        <li><a href="/docs/">中文文档</a></li>
        <li><a href="https://typst.app/about/">关于我们</a></li>
        <li><a href="https://typst.app/contact/">联系</a></li>
        <li><a href="https://typst.app/privacy/">隐私</a></li>
        <li><a href="https://typst.app/terms/">服务条款</a></li>
        <li><a href="https://typst.app/legal/">法律说明</a></li>
      </ul>
    </div>
    <div>
      <ul>
        <li><a href="https://typst.app/blog/">博客</a></li>
        <li><a href="https://twitter.com/typstapp/">Twitter</a></li>
        <li><a href="https://discord.gg/2uDybryKPe">Discord</a></li>
        <li><a href="https://www.linkedin.com/company/typst/">LinkedIn</a></li>
        <li><a href="https://instagram.com/typstapp/">Instagram</a></li>
        <li><a href="https://github.com/typst-doc-cn/typst-doc-cn.github.io">GitHub</a></li>
      </ul>
    </div>
    <div>
      <p>Made in Berlin</p>
    </div>
  </footer>
  <script src="/scripts/fuse.basic.min.js"></script>
  <script src="/scripts/docs.js?bust=20230913"></script>
  <script src="/scripts/analytics.js" defer></script>
</body>

</html>